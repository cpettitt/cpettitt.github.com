!function n(e,t,r){function u(o,i){if(!t[o]){if(!e[o]){var s="function"==typeof require&&require;if(!i&&s)return s(o,!0);if(l)return l(o,!0);throw new Error("Cannot find module '"+o+"'")}var a=t[o]={exports:{}};e[o][0].call(a.exports,function(n){var t=e[o][1][n];return u(t?t:n)},a,a.exports,n,e,t,r)}return t[o].exports}for(var l="function"==typeof require&&require,o=0;o<r.length;o++)u(r[o]);return u}({1:[function(n){var e=self;e.dagre={dot:n("./lib/dot"),layout:n("./lib/layout/layout"),util:n("./lib/util"),version:n("./lib/version")}},{"./lib/dot":6,"./lib/layout/layout":8,"./lib/util":12,"./lib/version":13}],2:[function(n,e){e.exports=function(n){function e(t,u){t in r||(r[t]=!0,u.push(t),n.neighbors(t).forEach(function(n){e(n,u)}))}var t=[],r={};return n.eachNode(function(n){var r=[];e(n,r),r.length>0&&t.push(r)}),t}},{}],3:[function(n,e){var t=n("../data/PriorityQueue");e.exports=function(n,e){var r={},u={},l=new t;if(0===n.nodes().length)return r;n.eachNode(function(n){l.add(n,Number.POSITIVE_INFINITY),r[n]=[]}),l.decrease(n.nodes()[0],0);for(var o,i=!1;l.size()>0;){if(o=l.removeMin(),o in u)r[o].push(u[o]),r[u[o]].push(o);else{if(i)throw new Error("Input graph is not connected:\n"+n.toString());i=!0}n.neighbors(o).forEach(function(n){var t=l.priority(n);if(void 0!==t){var r=e(o,n);t>r&&(u[n]=o,l.decrease(n,r))}})}return r}},{"../data/PriorityQueue":4}],4:[function(n,e){function t(){this._arr=[],this._keyIndices={}}e.exports=t,t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return Object.keys(this._keyIndices)},t.prototype.has=function(n){return n in this._keyIndices},t.prototype.priority=function(n){var e=this._keyIndices[n];return void 0!==e?this._arr[e].pri:void 0},t.prototype.add=function(n,e){if(!(n in this._keyIndices)){var t={key:n,pri:e},r=this._arr.length;return this._keyIndices[n]=r,this._arr.push(t),this._decrease(r),!0}return!1},t.prototype.min=function(){return this.size()>0?this._arr[0].key:void 0},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,e){var t=this._keyIndices[n];if(e>this._arr[t].pri)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[t].pri+" New: "+e);this._arr[t].pri=e,this._decrease(t)},t.prototype._heapify=function(n){var e=this._arr,t=2*n,r=t+1,u=n;t<e.length&&(u=e[t].pri<e[u].pri?t:u,r<e.length&&(u=e[r].pri<e[u].pri?r:u),u!==n&&(this._swap(n,u),this._heapify(u)))},t.prototype._decrease=function(n){for(var e,t=this._arr[n].pri;n>0&&(e=n>>1,!(this._arr[e].pri<t));)this._swap(n,e),n=e},t.prototype._swap=function(n,e){var t=this._arr,r=this._keyIndices,u=t[n];t[n]=t[e],t[e]=u,r[t[n].key]=n,r[t[e].key]=e}},{}],5:[function(n,e){function t(n){this._size=0,this._keys={},n&&n.forEach(function(n){this.add(n)},this)}e.exports=t,t.prototype.size=function(){return this._size},t.prototype.keys=function(){return Object.keys(this._keys)},t.prototype.has=function(n){return n in this._keys},t.prototype.add=function(n){return n in this._keys?!1:(this._keys[n]=!0,++this._size,!0)},t.prototype.remove=function(n){return n in this._keys?(delete this._keys[n],--this._size,!0):!1}},{}],6:[function(n,e,t){var r=(n("./util"),n("graphlib").Graph,n("graphlib-dot"));t.toGraph=r.parse,t.toGraphArray=r.parseMany,t.write=r.write,t.toObjects=function(n){var e=t.toGraph(n),r=e.nodes().map(function(n){return e.node(n)}),u=e.edges().map(function(n){var t=e.edge(n);return t.source=e.node(e.source(n)),t.target=e.node(e.target(n)),t});return{nodes:r,edges:u}}},{"./util":12,graphlib:26,"graphlib-dot":15}],7:[function(n,e){function t(n,e){l.createTimer();var t=l.createTimer().wrap("Acyclic Phase",r)(n);e>=2&&console.log("Acyclic Phase: reversed "+t+" edge(s)")}function r(n){function e(l){l in r||(r[l]=t[l]=!0,n.outEdges(l).forEach(function(r){var o,i=n.target(r);i in t?(o=n.edge(r),n.delEdge(r),o.reversed=!0,++u,n.addEdge(r,i,l,o)):e(i)}),delete t[l])}var t={},r={},u=0;return n.eachNode(function(n){e(n)}),u}function u(n){n.eachEdge(function(e,t,r,u){u.reversed&&(delete u.reversed,n.delEdge(e),n.addEdge(e,r,t,u))})}var l=n("../util");e.exports=t,e.exports.undo=u},{"../util":12}],8:[function(n,t){var r=n("../util"),u=n("./rank"),l=n("./acyclic"),o=n("graphlib").Digraph;t.exports=function(){function t(){function n(n,r){var u;if(n in r)u=r[n].dagre.id;else{if(!(n+"Id"in r))throw new Error("Edge must have either a "+n+" or "+n+"Id attribute");u=r[n+"Id"],r[n]=t.node(u)}if(!t.hasNode(u))throw new Error(n+" node for '"+e+"' not in node list");return u}var t=new o,r=0;return h.nodes.forEach(function(n){var e="id"in n?n.id:"_N"+r++;n.dagre={id:e,width:n.width,height:n.height},t.addNode(e,n.dagre)}),h.edges.forEach(function(e){var u=n("source",e),l=n("target",e);if(e.dagre={points:[]},u!==l){var o="id"in e?e.id:"_E"+r++;e.dagre.id=o,e.dagre.minLen=e.minLen||1,e.dagre.width=e.width||0,e.dagre.height=e.height||0,t.addEdge(o,u,l,e.dagre)}}),t}function i(){var n=v.rankSep();try{if(!h.nodes.length)return;var e=t();e.eachEdge(function(n,e,t,r){r.minLen*=2}),v.rankSep(n/2),l(e,h.debugLevel),u(e,h.debugLevel),s(e),p.run(e),g.run(e),a(e),c(e),l.undo(e)}finally{v.rankSep(n)}return v}function s(n){var e=0;n.eachEdge(function(t,r,u,l){var o=n.node(r).rank,i=n.node(u).rank;if(i>o+1){for(var s=r,a=o+1,c=0;i>a;++a,++c){var f="_D"+ ++e,h={width:l.width,height:l.height,edge:{id:t,source:r,target:u,attrs:l},rank:a,dummy:!0};0===c?h.index=0:a+1===i&&(h.index=1),n.addNode(f,h),n.addEdge(null,s,f,{}),s=f}n.addEdge(null,s,u,{}),n.delEdge(t)}})}function a(n){n.eachNode(function(e,t){if(t.dummy&&"index"in t){var r=t.edge;n.hasEdge(r.id)||n.addEdge(r.id,r.source,r.target,r.attrs);var u=n.edge(r.id).points;u[t.index]={x:t.x,y:t.y,ul:t.ul,ur:t.ur,dl:t.dl,dr:t.dr},n.delNode(e)}})}function c(n){n.eachEdge(function(n,e,t,r){r.reversed&&r.points.reverse()})}function f(n){return function(){return arguments.length?(n.apply(null,arguments),v):n()}}var h={nodes:[],edges:[],debugLevel:0},d=r.createTimer(),p=n("./order")(),g=n("./position")(),v={};return v.nodes=r.propertyAccessor(v,h,"nodes"),v.edges=r.propertyAccessor(v,h,"edges"),v.orderIters=f(p.iterations),v.nodeSep=f(g.nodeSep),v.edgeSep=f(g.edgeSep),v.universalSep=f(g.universalSep),v.rankSep=f(g.rankSep),v.rankDir=f(g.rankDir),v.debugAlignment=f(g.debugAlignment),v.debugLevel=r.propertyAccessor(v,h,"debugLevel",function(n){d.enabled(n),p.debugLevel(n),g.debugLevel(n)}),v.run=d.wrap("Total layout",i),v._normalize=s,v}},{"../util":12,"./acyclic":7,"./order":9,"./position":10,"./rank":11,graphlib:26}],9:[function(n,e){function t(n){var e={};return n.forEach(function(n,t){e[n]=t}),e}var r=n("../util");e.exports=function(){function n(n){var t=e(n),r=a(t),u=c(n,t);h.debugLevel>=2&&console.log("Order phase start cross count: "+u);var l,i,s;for(i=0,s=0;4>s&&i<h.iterations;++i,++s)l=o(n,i,t),u>l&&(r=a(t),u=l,s=0),h.debugLevel>=3&&console.log("Order phase iter "+i+" cross count: "+u);return r.forEach(function(e){e.forEach(function(e,t){n.node(e).order=t})}),h.debugLevel>=2&&(console.log("Order iterations: "+i),console.log("Order phase best cross count: "+u)),h.debugLevel>=4&&(console.log("Final layering:"),r.forEach(function(n,e){console.log("Layer: "+e,n)})),r}function e(n){var e=[];return n.eachNode(function(n,t){var r=e[t.rank]||(e[t.rank]=[]);r.push(n)}),e}function u(n){return function(e){var t=[];return n.inEdges(e).forEach(function(e){t.push(n.source(e))}),t}}function l(n){return function(e){var t=[];return n.outEdges(e).forEach(function(e){t.push(n.target(e))}),t}}function o(n,e,r){var o;if(0===e%2)for(o=1;o<r.length;++o)i(r[o],u(n),t(r[o-1]));else for(o=r.length-2;o>=0;--o)i(r[o],l(n),t(r[o+1]));return c(n,r)}function i(n,e,r){var u=t(n),l=s(n,e,r),o=n.filter(function(n){return-1!==l[n]});o.sort(function(n,e){return l[n]-l[e]||u[n]-u[e]});for(var i=n.length-1;i>=0;--i)-1!==l[n[i]]&&(n[i]=o.pop())}function s(n,e,t){var u={};return n.forEach(function(n){var l=e(n),o=-1;l.length>0&&(o=r.sum(l.map(function(n){return t[n]}))/l.length),u[n]=o}),u}function a(n){return n.map(function(n){return n.slice(0)})}function c(n,e){var t,r=0;return e.forEach(function(e){t&&(r+=f(n,t,e)),t=e}),r}function f(n,e,r){var u=t(r),l=[];e.forEach(function(e){var t=[];n.outEdges(e).forEach(function(e){t.push(u[n.target(e)])}),t.sort(function(n,e){return n-e}),l=l.concat(t)});for(var o=1;o<r.length;)o<<=1;var i=2*o-1;o-=1;for(var s=[],a=0;i>a;++a)s[a]=0;var c=0;return l.forEach(function(n){var e=n+o;for(++s[e];e>0;)e%2&&(c+=s[e+1]),e=e-1>>1,++s[e]}),c}var h={iterations:24,debugLevel:0},d=r.createTimer(),p={};return p.iterations=r.propertyAccessor(p,h,"iterations"),p.debugLevel=r.propertyAccessor(p,h,"debugLevel",function(n){d.enabled(n)}),p._initOrder=e,p.run=d.wrap("Order Phase",n),p.crossCount=c,p.bilayerCrossCount=f,p}},{"../util":12}],10:[function(n,e){var t=n("../util");e.exports=function(){function n(n){var e=[];n.eachNode(function(n,t){var r=e[t.rank]||(e[t.rank]=[]);r[t.order]=n});var o=r(n,e),i={};["u","d"].forEach(function(t){"d"===t&&e.reverse(),["l","r"].forEach(function(r){"r"===r&&c(e);var s=t+r,f=u(n,e,o,"u"===t?"predecessors":"successors");i[s]=l(n,e,f.pos,f.root,f.align),E.debugLevel>=3&&y(t+r,n,e,i[s]),"r"===r&&a(i[s]),"r"===r&&c(e)}),"d"===t&&e.reverse()}),s(n,e,i),n.eachNode(function(e){var t=[];for(var r in i)g(r,n,e,i[r][e]),t.push(i[r][e]);t.sort(function(n,e){return n-e}),p(n,e,(t[1]+t[2])/2)});var d=t.min(n.nodes().map(function(e){return p(n,e)-f(n,e)/2}));n.eachNode(function(e){p(n,e,p(n,e)-d)});var _=0;e.forEach(function(e){var r=t.max(e.map(function(e){return h(n,e)}));_+=r/2,e.forEach(function(e){v(n,e,_)}),_+=r/2+E.rankSep})}function e(n,e){return e>n?n.toString().length+":"+n+"-"+e:e.toString().length+":"+e+"-"+n}function r(n,t){var r={},u={};if(t.length<=2)return r;t[1].forEach(function(n,e){u[n]=e});for(var l=1;l<t.length-1;++l)for(var o=t[l],i=t[l+1],s=0,a=0,c=0;c<i.length;++c){var f=i[c];u[f]=c;var h=void 0;if(n.node(f).dummy){var d=n.predecessors(f)[0];n.node(d).dummy&&(h=u[d])}if(void 0===h&&c===i.length-1&&(h=o.length-1),void 0!==h){for(;c>=a;++a)n.predecessors(i[a]).forEach(function(n){var t=u[n];(s>t||t>h)&&(r[e(i[a],n)]=!0)});s=h}}return r}function u(n,t,r,u){var l={},o={},i={};return t.forEach(function(n){n.forEach(function(n,e){o[n]=n,i[n]=n,l[n]=e})}),t.forEach(function(t){var s=-1;t.forEach(function(t){var a,c=n[u](t);c.length>0&&(c.sort(function(n,e){return l[n]-l[e]}),a=(c.length-1)/2,c.slice(Math.floor(a),Math.ceil(a)+1).forEach(function(n){i[t]===t&&!r[e(n,t)]&&s<l[n]&&(i[n]=t,i[t]=o[t]=o[n],s=l[n])}))})}),{pos:l,root:o,align:i}}function l(n,e,r,u,l){function o(n,e,t){a[n][e]=e in a[n]?Math.min(a[n][e],t):t}function i(e){if(!(e in h)){h[e]=0;var t=e;do{if(r[t]>0){var a=u[f[t]];i(a),s[e]===e&&(s[e]=s[a]);var c=d(n,f[t])+d(n,t);s[e]!==s[a]?o(s[a],s[e],h[e]-h[a]-c):h[e]=Math.max(h[e],h[a]+c)}t=l[t]}while(t!==e)}}var s={},a={},c={},f={},h={};return e.forEach(function(n){n.forEach(function(e,t){s[e]=e,a[e]={},t>0&&(f[e]=n[t-1])})}),t.values(u).forEach(function(n){i(n)}),e.forEach(function(n){n.forEach(function(n){if(h[n]=h[u[n]],n===u[n]&&n===s[n]){var e=0;n in a&&Object.keys(a[n]).length>0&&(e=t.min(Object.keys(a[n]).map(function(e){return a[n][e]+(e in c?c[e]:0)}))),c[n]=e}})}),e.forEach(function(n){n.forEach(function(n){h[n]+=c[s[u[n]]]||0})}),h}function o(n,e,r){return t.min(e.map(function(n){var e=n[0];return r[e]}))}function i(n,e,r){return t.max(e.map(function(n){var e=n[n.length-1];return r[e]}))}function s(n,e,t){var r,u={},l={},s={},a=Number.POSITIVE_INFINITY;for(var c in t){var f=t[c];u[c]=o(n,e,f),l[c]=i(n,e,f);var h=l[c]-u[c];a>h&&(a=h,r=c)}["u","d"].forEach(function(n){["l","r"].forEach(function(e){var t=n+e;s[t]="l"===e?u[r]-u[t]:l[r]-l[t]})});for(var c in t)n.eachNode(function(n){t[c][n]+=s[c]})}function a(n){for(var e in n)n[e]=-n[e]}function c(n){n.forEach(function(n){n.reverse()})}function f(n,e){switch(E.rankDir){case"LR":return n.node(e).height;default:return n.node(e).width}}function h(n,e){switch(E.rankDir){case"LR":return n.node(e).width;default:return n.node(e).height}}function d(n,e){if(null!==E.universalSep)return E.universalSep;var t=f(n,e),r=n.node(e).dummy?E.edgeSep:E.nodeSep;return(t+r)/2}function p(n,e,t){switch(E.rankDir){case"LR":if(arguments.length<3)return n.node(e).y;n.node(e).y=t;break;default:if(arguments.length<3)return n.node(e).x;n.node(e).x=t}}function g(n,e,t,r){switch(E.rankDir){case"LR":if(arguments.length<3)return e.node(t)[n];e.node(t)[n]=r;break;default:if(arguments.length<3)return e.node(t)[n];e.node(t)[n]=r}}function v(n,e,t){switch(E.rankDir){case"LR":if(arguments.length<3)return n.node(e).x;n.node(e).x=t;break;default:if(arguments.length<3)return n.node(e).y;n.node(e).y=t}}function y(n,e,t,r){t.forEach(function(t,u){var l,o;t.forEach(function(t){var i=r[t];if(l){var s=d(e,l)+d(e,t);s>i-o&&console.log("Position phase: sep violation. Align: "+n+". Layer: "+u+". "+"U: "+l+" V: "+t+". Actual sep: "+(i-o)+" Expected sep: "+s)}l=t,o=i})})}var E={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30,rankDir:"TB",debugLevel:0},_=t.createTimer(),b={};return b.nodeSep=t.propertyAccessor(b,E,"nodeSep"),b.edgeSep=t.propertyAccessor(b,E,"edgeSep"),b.universalSep=t.propertyAccessor(b,E,"universalSep"),b.rankSep=t.propertyAccessor(b,E,"rankSep"),b.rankDir=t.propertyAccessor(b,E,"rankDir"),b.debugLevel=t.propertyAccessor(b,E,"debugLevel",function(n){_.enabled(n)}),b.run=_.wrap("Position Phase",n),b}},{"../util":12}],11:[function(n,e){function t(n){var e={},t=new s;for(n.eachNode(function(r){t.add(r,n.inEdges(r).length),e[r]=0});t.size()>0;){var r=t.min();if(t.priority(r)>0)throw new Error("Input graph is not acyclic: "+n.toString());t.removeMin();var u=e[r];n.node(r).rank=u,n.outEdges(r).forEach(function(r){var l=n.target(r);e[l]=Math.max(e[l],u+(n.edge(r).minLen||1)),t.decrease(l,t.priority(l)-1)})}}function r(n){function e(e){return Math.abs(n.node(e.u).rank-n.node(e.v).rank)-e.len}function t(){var n,t=Number.POSITIVE_INFINITY;return u.forEach(function(u){if(r.has(u.u)!==r.has(u.v)){var l=e(u);t>l&&(n=r.has(u.u)?{treeNode:u.v,graphNode:u.u,len:-u.len}:{treeNode:u.u,graphNode:u.v,len:u.len},t=l)}}),n}var r=new a(n.nodes()),u=[],o={};n.eachEdge(function(n,e,t,r){var i=l(e,t);i in o||u.push(o[i]={u:e,v:t,len:1}),o[i].len=Math.max(o[i].len,r.minLen||1)}),r.remove(n.nodes()[0]);for(;r.size()>0;){var i=t();r.remove(i.graphNode),n.node(i.graphNode).rank=n.node(i.treeNode).rank+i.len}}function u(n){var e=o.min(n.nodes().map(function(e){return n.node(e).rank}));n.eachNode(function(n,t){t.rank-=e})}function l(n,e){return e>n?n.length+":"+n+"-"+e:e.length+":"+e+"-"+n}var o=n("../util"),i=n("../algo/components"),s=(n("../algo/prim"),n("../data/PriorityQueue")),a=n("../data/Set");e.exports=function(n,e){var l=o.createTimer(e>=1);l.wrap("Rank phase",function(){t(n),i(n).forEach(function(e){var t=n.subgraph(e);r(t),u(t)})})()}},{"../algo/components":2,"../algo/prim":3,"../data/PriorityQueue":4,"../data/Set":5,"../util":12}],12:[function(n,e,t){t.mergeAttributes=function(n,e){Object.keys(n).forEach(function(t){e[t]=n[t]})},t.min=function(n){return Math.min.apply(null,n)},t.max=function(n){return Math.max.apply(null,n)},t.all=function(n,e){for(var t=0;t<n.length;++t)if(!e(n[t]))return!1;return!0},t.sum=function(n){return n.reduce(function(n,e){return n+e},0)},t.concat=function(n){return Array.prototype.concat.apply([],n)},t.values=function(n){return Object.keys(n).map(function(e){return n[e]})},t.union=function(n){for(var e={},t=0;t<n.length;++t)for(var r=n[t],u=0;u<r.length;++u){var l=r[u];e[l]=l}var o=[];for(var i in e)o.push(e[i]);return o},t.intersectRect=function(n,e){var t,r,u=n.x,l=n.y,o=e.x-u,i=e.y-l,s=n.width/2,a=n.height/2;return Math.abs(i)*s>Math.abs(o)*a?(0>i&&(a=-a),t=0===i?0:a*o/i,r=a):(0>o&&(s=-s),t=s,r=0===o?0:s*i/o),{x:u+t,y:l+r}},t.pointStr=function(n){return n.x+","+n.y},t.createTimer=function(n){var e={};return n=n||!1,e.enabled=function(t){return arguments.length?(n=t,e):n},e.wrap=function(e,t){return function(){var r=n?(new Date).getTime():null;try{return t.apply(null,arguments)}finally{r&&console.log(e+" time: "+((new Date).getTime()-r)+"ms")}}},e},t.propertyAccessor=function(n,e,t,r){return function(u){return arguments.length?(e[t]=u,r&&r(u),n):e[t]}}},{}],13:[function(n,e){e.exports="0.1.2"},{}],14:[function(n,e){e.exports=function(){function n(n){return'"'+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,t){function r(n){F>P||(P>F&&(F=P,q=[]),q.push(n))}function u(){var n,e;if(e=l(),null!==e)for(n=[];null!==e;)n.push(e),e=l();else n=null;return n}function l(){var n,t,u,l,i,s,a,c,f,h,d,p,g,v,y,E;for(v=P,y=P,n=[],t=L();null!==t;)n.push(t),t=L();if(null!==n)if(E=P,t=O(),null!==t?(u=L(),null!==u?t=[t,u]:(t=null,P=E)):(t=null,P=E),t=null!==t?t:"",null!==t)if(u=j(),null!==u){for(l=[],i=L();null!==i;)l.push(i),i=L();if(null!==l)if(i=w(),i=null!==i?i:"",null!==i){for(s=[],a=L();null!==a;)s.push(a),a=L();if(null!==s)if(123===e.charCodeAt(P)?(a="{",P++):(a=null,0===R&&r('"{"')),null!==a){for(c=[],f=L();null!==f;)c.push(f),f=L();if(null!==c)if(f=o(),f=null!==f?f:"",null!==f){for(h=[],d=L();null!==d;)h.push(d),d=L();if(null!==h)if(125===e.charCodeAt(P)?(d="}",P++):(d=null,0===R&&r('"}"')),null!==d){for(p=[],g=L();null!==g;)p.push(g),g=L();null!==p?n=[n,t,u,l,i,s,a,c,f,h,d,p]:(n=null,P=y)}else n=null,P=y;else n=null,P=y}else n=null,P=y;else n=null,P=y}else n=null,P=y;else n=null,P=y}else n=null,P=y;else n=null,P=y}else n=null,P=y;else n=null,P=y;else n=null,P=y;return null!==n&&(n=function(n,e,t,r){return{type:e,id:t,stmts:r}}(v,n[2],n[4],n[8])),null===n&&(P=v),n}function o(){var n,t,u,l,o,s,a,c,f,h,d;if(f=P,h=P,n=i(),null!==n){for(t=[],u=L();null!==u;)t.push(u),u=L();if(null!==t)if(59===e.charCodeAt(P)?(u=";",P++):(u=null,0===R&&r('";"')),u=null!==u?u:"",null!==u){for(l=[],d=P,o=[],s=L();null!==s;)o.push(s),s=L();if(null!==o)if(s=i(),null!==s){for(a=[],c=L();null!==c;)a.push(c),c=L();null!==a?(59===e.charCodeAt(P)?(c=";",P++):(c=null,0===R&&r('";"')),c=null!==c?c:"",null!==c?o=[o,s,a,c]:(o=null,P=d)):(o=null,P=d)}else o=null,P=d;else o=null,P=d;for(;null!==o;){for(l.push(o),d=P,o=[],s=L();null!==s;)o.push(s),s=L();if(null!==o)if(s=i(),null!==s){for(a=[],c=L();null!==c;)a.push(c),c=L();null!==a?(59===e.charCodeAt(P)?(c=";",P++):(c=null,0===R&&r('";"')),c=null!==c?c:"",null!==c?o=[o,s,a,c]:(o=null,P=d)):(o=null,P=d)}else o=null,P=d;else o=null,P=d}null!==l?n=[n,t,u,l]:(n=null,P=h)}else n=null,P=h;else n=null,P=h}else n=null,P=h;return null!==n&&(n=function(n,e,t){for(var r=[e],u=0;u<t.length;++u)r.push(t[u][1]);return r}(f,n[0],n[3])),null===n&&(P=f),n}function i(){var n;return n=s(),null===n&&(n=f(),null===n&&(n=h(),null===n&&(n=a(),null===n&&(n=c())))),n}function s(){var n,e,t,r,u;if(r=P,u=P,n=N(),null===n&&(n=k(),null===n&&(n=A())),null!==n){for(e=[],t=L();null!==t;)e.push(t),t=L();null!==e?(t=d(),null!==t?n=[n,e,t]:(n=null,P=u)):(n=null,P=u)}else n=null,P=u;return null!==n&&(n=function(n,e,t){return{type:"attr",attrType:e,attrs:t||{}}}(r,n[0],n[2])),null===n&&(P=r),n}function a(){var n,t,u,l,o,i,s;if(i=P,s=P,n=w(),null!==n){for(t=[],u=L();null!==u;)t.push(u),u=L();if(null!==t)if(61===e.charCodeAt(P)?(u="=",P++):(u=null,0===R&&r('"="')),null!==u){for(l=[],o=L();null!==o;)l.push(o),o=L();null!==l?(o=w(),null!==o?n=[n,t,u,l,o]:(n=null,P=s)):(n=null,P=s)}else n=null,P=s;else n=null,P=s}else n=null,P=s;return null!==n&&(n=function(n,e,t){var r={};return r[e]=t,{type:"inlineAttr",attrs:r}}(i,n[0],n[4])),null===n&&(P=i),n}function c(){var n,e,t,r,u;if(r=P,u=P,n=_(),null!==n){for(e=[],t=L();null!==t;)e.push(t),t=L();null!==e?(t=d(),t=null!==t?t:"",null!==t?n=[n,e,t]:(n=null,P=u)):(n=null,P=u)}else n=null,P=u;return null!==n&&(n=function(n,e,t){return{type:"node",id:e,attrs:t||{}}}(r,n[0],n[2])),null===n&&(P=r),n}function f(){var n,e,t,r,u,l,o;if(l=P,o=P,n=E(),null!==n){for(e=[],t=L();null!==t;)e.push(t),t=L();if(null!==e)if(t=v(),null!==t){for(r=[],u=L();null!==u;)r.push(u),u=L();null!==r?(u=d(),u=null!==u?u:"",null!==u?n=[n,e,t,r,u]:(n=null,P=o)):(n=null,P=o)}else n=null,P=o;else n=null,P=o}else n=null,P=o;return null!==n&&(n=function(n,e,t,r){for(var u=[e],l=0;l<t.length;++l)u.push(t[l]);return{type:"edge",elems:u,attrs:r||{}}}(l,n[0],n[2],n[4])),null===n&&(P=l),n}function h(){var n,t,u,l,i,s,a,c,f,h;if(a=P,c=P,f=P,n=S(),null!==n){for(t=[],u=L();null!==u;)t.push(u),u=L();if(null!==t){if(h=P,u=w(),null!==u){for(l=[],i=L();null!==i;)l.push(i),i=L();null!==l?u=[u,l]:(u=null,P=h)}else u=null,P=h;u=null!==u?u:"",null!==u?n=[n,t,u]:(n=null,P=f)}else n=null,P=f}else n=null,P=f;if(n=null!==n?n:"",null!==n)if(123===e.charCodeAt(P)?(t="{",P++):(t=null,0===R&&r('"{"')),null!==t){for(u=[],l=L();null!==l;)u.push(l),l=L();if(null!==u)if(l=o(),l=null!==l?l:"",null!==l){for(i=[],s=L();null!==s;)i.push(s),s=L();null!==i?(125===e.charCodeAt(P)?(s="}",P++):(s=null,0===R&&r('"}"')),null!==s?n=[n,t,u,l,i,s]:(n=null,P=c)):(n=null,P=c)}else n=null,P=c;else n=null,P=c}else n=null,P=c;else n=null,P=c;return null!==n&&(n=function(n,e,t){return e=e[2]||[],{type:"subgraph",id:e[0],stmts:t}}(a,n[0],n[3])),null===n&&(P=a),n}function d(){var n,e,t,r,u,l,o;if(u=P,l=P,n=p(),null!==n){for(e=[],o=P,t=[],r=L();null!==r;)t.push(r),r=L();for(null!==t?(r=p(),null!==r?t=[t,r]:(t=null,P=o)):(t=null,P=o);null!==t;){for(e.push(t),o=P,t=[],r=L();null!==r;)t.push(r),r=L();null!==t?(r=p(),null!==r?t=[t,r]:(t=null,P=o)):(t=null,P=o)}null!==e?n=[n,e]:(n=null,P=l)}else n=null,P=l;return null!==n&&(n=function(n,e,t){for(var r=e,u=0;u<t.length;++u)r=M(r,t[u][1]);return r}(u,n[0],n[1])),null===n&&(P=u),n}function p(){var n,t,u,l,o,i,s;if(i=P,s=P,91===e.charCodeAt(P)?(n="[",P++):(n=null,0===R&&r('"["')),null!==n){for(t=[],u=L();null!==u;)t.push(u),u=L();if(null!==t)if(u=g(),u=null!==u?u:"",null!==u){for(l=[],o=L();null!==o;)l.push(o),o=L();null!==l?(93===e.charCodeAt(P)?(o="]",P++):(o=null,0===R&&r('"]"')),null!==o?n=[n,t,u,l,o]:(n=null,P=s)):(n=null,P=s)}else n=null,P=s;else n=null,P=s}else n=null,P=s;return null!==n&&(n=function(n,e){return e}(i,n[2])),null===n&&(P=i),n}function g(){var n,t,u,l,o,i,s,a,c;if(s=P,a=P,n=y(),null!==n){for(t=[],c=P,u=[],l=L();null!==l;)u.push(l),l=L();if(null!==u)if(44===e.charCodeAt(P)?(l=",",P++):(l=null,0===R&&r('","')),l=null!==l?l:"",null!==l){for(o=[],i=L();null!==i;)o.push(i),i=L();null!==o?(i=y(),null!==i?u=[u,l,o,i]:(u=null,P=c)):(u=null,P=c)}else u=null,P=c;else u=null,P=c;for(;null!==u;){for(t.push(u),c=P,u=[],l=L();null!==l;)u.push(l),l=L();if(null!==u)if(44===e.charCodeAt(P)?(l=",",P++):(l=null,0===R&&r('","')),l=null!==l?l:"",null!==l){for(o=[],i=L();null!==i;)o.push(i),i=L();null!==o?(i=y(),null!==i?u=[u,l,o,i]:(u=null,P=c)):(u=null,P=c)}else u=null,P=c;else u=null,P=c}null!==t?n=[n,t]:(n=null,P=a)}else n=null,P=a;return null!==n&&(n=function(n,e,t){for(var r=e,u=0;u<t.length;++u)r=M(r,t[u][3]);return r}(s,n[0],n[1])),null===n&&(P=s),n}function v(){var n,t,u,l,o,i,s,a;if(i=P,s=P,a=P,"--"===e.substr(P,2)?(n="--",P+=2):(n=null,0===R&&r('"--"')),null!==n?(t=function(){return T}(P)?null:"",null!==t?n=[n,t]:(n=null,P=a)):(n=null,P=a),null===n&&(a=P,"->"===e.substr(P,2)?(n="->",P+=2):(n=null,0===R&&r('"->"')),null!==n?(t=function(){return T}(P)?"":null,null!==t?n=[n,t]:(n=null,P=a)):(n=null,P=a)),null!==n){for(t=[],u=L();null!==u;)t.push(u),u=L();if(null!==t)if(u=E(),null!==u){for(l=[],o=L();null!==o;)l.push(o),o=L();null!==l?(o=v(),o=null!==o?o:"",null!==o?n=[n,t,u,l,o]:(n=null,P=s)):(n=null,P=s)}else n=null,P=s;else n=null,P=s}else n=null,P=s;return null!==n&&(n=function(n,e,t){for(var r=[e],u=0;u<t.length;++u)r.push(t[u]);return r}(i,n[2],n[4])),null===n&&(P=i),n}function y(){var n,t,u,l,o,i,s,a;if(i=P,s=P,n=w(),null!==n){for(a=P,t=[],u=L();null!==u;)t.push(u),u=L();if(null!==t)if(61===e.charCodeAt(P)?(u="=",P++):(u=null,0===R&&r('"="')),null!==u){for(l=[],o=L();null!==o;)l.push(o),o=L();null!==l?(o=w(),null!==o?t=[t,u,l,o]:(t=null,P=a)):(t=null,P=a)}else t=null,P=a;else t=null,P=a;t=null!==t?t:"",null!==t?n=[n,t]:(n=null,P=s)}else n=null,P=s;return null!==n&&(n=function(n,e,t){var r={};return r[e]=t[3],r}(i,n[0],n[1])),null===n&&(P=i),n}function E(){var n,e;return n=h(),null===n&&(e=P,n=_(),null!==n&&(n=function(n,e){return{type:"node",id:e,attrs:{}}}(e,n)),null===n&&(P=e)),n}function _(){var n,e,t,r,u;if(r=P,u=P,n=w(),null!==n){for(e=[],t=L();null!==t;)e.push(t),t=L();null!==e?(t=b(),t=null!==t?t:"",null!==t?n=[n,e,t]:(n=null,P=u)):(n=null,P=u)}else n=null,P=u;return null!==n&&(n=function(n,e){return e}(r,n[0])),null===n&&(P=r),n}function b(){var n,t,u,l,o,i,s,a,c;if(a=P,58===e.charCodeAt(P)?(n=":",P++):(n=null,0===R&&r('":"')),null!==n){for(t=[],u=L();null!==u;)t.push(u),u=L();if(null!==t)if(u=w(),null!==u){for(l=[],o=L();null!==o;)l.push(o),o=L();if(null!==l){if(c=P,58===e.charCodeAt(P)?(o=":",P++):(o=null,0===R&&r('":"')),null!==o){for(i=[],s=L();null!==s;)i.push(s),s=L();null!==i?(s=m(),null!==s?o=[o,i,s]:(o=null,P=c)):(o=null,P=c)}else o=null,P=c;o=null!==o?o:"",null!==o?n=[n,t,u,l,o]:(n=null,P=a)}else n=null,P=a}else n=null,P=a;else n=null,P=a}else n=null,P=a;return n}function m(){var n;return 110===e.charCodeAt(P)?(n="n",P++):(n=null,0===R&&r('"n"')),null===n&&("ne"===e.substr(P,2)?(n="ne",P+=2):(n=null,0===R&&r('"ne"')),null===n&&(101===e.charCodeAt(P)?(n="e",P++):(n=null,0===R&&r('"e"')),null===n&&("se"===e.substr(P,2)?(n="se",P+=2):(n=null,0===R&&r('"se"')),null===n&&(115===e.charCodeAt(P)?(n="s",P++):(n=null,0===R&&r('"s"')),null===n&&("sw"===e.substr(P,2)?(n="sw",P+=2):(n=null,0===R&&r('"sw"')),null===n&&(119===e.charCodeAt(P)?(n="w",P++):(n=null,0===R&&r('"w"')),null===n&&("nw"===e.substr(P,2)?(n="nw",P+=2):(n=null,0===R&&r('"nw"')),null===n&&(99===e.charCodeAt(P)?(n="c",P++):(n=null,0===R&&r('"c"')),null===n&&(95===e.charCodeAt(P)?(n="_",P++):(n=null,0===R&&r('"_"'))))))))))),n}function w(){var n,t,u,l,o,i,s,a,c;if(R++,i=P,s=P,/^[a-zA-Z\u0200-\u0377_]/.test(e.charAt(P))?(n=e.charAt(P),P++):(n=null,0===R&&r("[a-zA-Z\\u0200-\\u0377_]")),null!==n){for(t=[],/^[a-zA-Z\u0200-\u0377_0-9]/.test(e.charAt(P))?(u=e.charAt(P),P++):(u=null,0===R&&r("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==u;)t.push(u),/^[a-zA-Z\u0200-\u0377_0-9]/.test(e.charAt(P))?(u=e.charAt(P),P++):(u=null,0===R&&r("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==t?n=[n,t]:(n=null,P=s)}else n=null,P=s;if(null!==n&&(n=function(n,e,t){return e+t.join("")}(i,n[0],n[1])),null===n&&(P=i),null===n){if(i=P,s=P,45===e.charCodeAt(P)?(n="-",P++):(n=null,0===R&&r('"-"')),n=null!==n?n:"",null!==n)if(46===e.charCodeAt(P)?(t=".",P++):(t=null,0===R&&r('"."')),null!==t){if(/^[0-9]/.test(e.charAt(P))?(l=e.charAt(P),P++):(l=null,0===R&&r("[0-9]")),null!==l)for(u=[];null!==l;)u.push(l),/^[0-9]/.test(e.charAt(P))?(l=e.charAt(P),P++):(l=null,0===R&&r("[0-9]"));else u=null;null!==u?n=[n,t,u]:(n=null,P=s)}else n=null,P=s;else n=null,P=s;if(null!==n&&(n=function(n,e,t,r){return e+t+r.join("")}(i,n[0],n[1],n[2])),null===n&&(P=i),null===n){if(i=P,s=P,45===e.charCodeAt(P)?(n="-",P++):(n=null,0===R&&r('"-"')),n=null!==n?n:"",null!==n){if(/^[0-9]/.test(e.charAt(P))?(u=e.charAt(P),P++):(u=null,0===R&&r("[0-9]")),null!==u)for(t=[];null!==u;)t.push(u),/^[0-9]/.test(e.charAt(P))?(u=e.charAt(P),P++):(u=null,0===R&&r("[0-9]"));else t=null;if(null!==t){if(a=P,46===e.charCodeAt(P)?(u=".",P++):(u=null,0===R&&r('"."')),null!==u){for(l=[],/^[0-9]/.test(e.charAt(P))?(o=e.charAt(P),P++):(o=null,0===R&&r("[0-9]"));null!==o;)l.push(o),/^[0-9]/.test(e.charAt(P))?(o=e.charAt(P),P++):(o=null,0===R&&r("[0-9]"));null!==l?u=[u,l]:(u=null,P=a)}else u=null,P=a;u=null!==u?u:"",null!==u?n=[n,t,u]:(n=null,P=s)}else n=null,P=s}else n=null,P=s;if(null!==n&&(n=function(n,e,t,r){return e+t.join("")+(r[0]||"")+(r[1]||[]).join("")}(i,n[0],n[1],n[2])),null===n&&(P=i),null===n){if(i=P,s=P,34===e.charCodeAt(P)?(n='"',P++):(n=null,0===R&&r('"\\""')),null!==n){for(t=[],a=P,'\\"'===e.substr(P,2)?(u='\\"',P+=2):(u=null,0===R&&r('"\\\\\\""')),null!==u&&(u=function(){return'"'}(a)),null===u&&(P=a),null===u&&(a=P,c=P,92===e.charCodeAt(P)?(u="\\",P++):(u=null,0===R&&r('"\\\\"')),null!==u?(/^[^"]/.test(e.charAt(P))?(l=e.charAt(P),P++):(l=null,0===R&&r('[^"]')),null!==l?u=[u,l]:(u=null,P=c)):(u=null,P=c),null!==u&&(u=function(n,e){return"\\"+e}(a,u[1])),null===u&&(P=a),null===u&&(/^[^"]/.test(e.charAt(P))?(u=e.charAt(P),P++):(u=null,0===R&&r('[^"]'))));null!==u;)t.push(u),a=P,'\\"'===e.substr(P,2)?(u='\\"',P+=2):(u=null,0===R&&r('"\\\\\\""')),null!==u&&(u=function(){return'"'}(a)),null===u&&(P=a),null===u&&(a=P,c=P,92===e.charCodeAt(P)?(u="\\",P++):(u=null,0===R&&r('"\\\\"')),null!==u?(/^[^"]/.test(e.charAt(P))?(l=e.charAt(P),P++):(l=null,0===R&&r('[^"]')),null!==l?u=[u,l]:(u=null,P=c)):(u=null,P=c),null!==u&&(u=function(n,e){return"\\"+e}(a,u[1])),null===u&&(P=a),null===u&&(/^[^"]/.test(e.charAt(P))?(u=e.charAt(P),P++):(u=null,0===R&&r('[^"]'))));null!==t?(34===e.charCodeAt(P)?(u='"',P++):(u=null,0===R&&r('"\\""')),null!==u?n=[n,t,u]:(n=null,P=s)):(n=null,P=s)}else n=null,P=s;null!==n&&(n=function(n,e){return e.join("")}(i,n[1])),null===n&&(P=i)}}}return R--,0===R&&null===n&&r("identifier"),n}function k(){var n,t;return t=P,"node"===e.substr(P,4).toLowerCase()?(n=e.substr(P,4),P+=4):(n=null,0===R&&r('"node"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(t,n)),null===n&&(P=t),n}function A(){var n,t;return t=P,"edge"===e.substr(P,4).toLowerCase()?(n=e.substr(P,4),P+=4):(n=null,0===R&&r('"edge"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(t,n)),null===n&&(P=t),n}function N(){var n,t;return t=P,"graph"===e.substr(P,5).toLowerCase()?(n=e.substr(P,5),P+=5):(n=null,0===R&&r('"graph"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(t,n)),null===n&&(P=t),n}function x(){var n,t;return t=P,"digraph"===e.substr(P,7).toLowerCase()?(n=e.substr(P,7),P+=7):(n=null,0===R&&r('"digraph"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(t,n)),null===n&&(P=t),n}function S(){var n,t;return t=P,"subgraph"===e.substr(P,8).toLowerCase()?(n=e.substr(P,8),P+=8):(n=null,0===R&&r('"subgraph"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(t,n)),null===n&&(P=t),n}function O(){var n,t;return t=P,"strict"===e.substr(P,6).toLowerCase()?(n=e.substr(P,6),P+=6):(n=null,0===R&&r('"strict"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(t,n)),null===n&&(P=t),n}function j(){var n,e;return n=N(),null===n&&(e=P,n=x(),null!==n&&(n=function(n,e){return T="digraph"===e,e}(e,n)),null===n&&(P=e)),n}function C(){var n,t;if(R++,/^[ \t\r\n]/.test(e.charAt(P))?(t=e.charAt(P),P++):(t=null,0===R&&r("[ \\t\\r\\n]")),null!==t)for(n=[];null!==t;)n.push(t),/^[ \t\r\n]/.test(e.charAt(P))?(t=e.charAt(P),P++):(t=null,0===R&&r("[ \\t\\r\\n]"));else n=null;return R--,0===R&&null===n&&r("whitespace"),n}function G(){var n,t,u,l,o,i,s;if(R++,o=P,"//"===e.substr(P,2)?(n="//",P+=2):(n=null,0===R&&r('"//"')),null!==n){for(t=[],/^[^\n]/.test(e.charAt(P))?(u=e.charAt(P),P++):(u=null,0===R&&r("[^\\n]"));null!==u;)t.push(u),/^[^\n]/.test(e.charAt(P))?(u=e.charAt(P),P++):(u=null,0===R&&r("[^\\n]"));null!==t?n=[n,t]:(n=null,P=o)}else n=null,P=o;if(null===n)if(o=P,"/*"===e.substr(P,2)?(n="/*",P+=2):(n=null,0===R&&r('"/*"')),null!==n){for(t=[],i=P,s=P,R++,"*/"===e.substr(P,2)?(u="*/",P+=2):(u=null,0===R&&r('"*/"')),R--,null===u?u="":(u=null,P=s),null!==u?(e.length>P?(l=e.charAt(P),P++):(l=null,0===R&&r("any character")),null!==l?u=[u,l]:(u=null,P=i)):(u=null,P=i);null!==u;)t.push(u),i=P,s=P,R++,"*/"===e.substr(P,2)?(u="*/",P+=2):(u=null,0===R&&r('"*/"')),R--,null===u?u="":(u=null,P=s),null!==u?(e.length>P?(l=e.charAt(P),P++):(l=null,0===R&&r("any character")),null!==l?u=[u,l]:(u=null,P=i)):(u=null,P=i);null!==t?("*/"===e.substr(P,2)?(u="*/",P+=2):(u=null,0===R&&r('"*/"')),null!==u?n=[n,t,u]:(n=null,P=o)):(n=null,P=o)}else n=null,P=o;return R--,0===R&&null===n&&r("comment"),n}function L(){var n;return n=C(),null===n&&(n=G()),n
}function I(n){n.sort();for(var e=null,t=[],r=0;r<n.length;r++)n[r]!==e&&(t.push(n[r]),e=n[r]);return t}function D(){for(var n=1,t=1,r=!1,u=0;u<Math.max(P,F);u++){var l=e.charAt(u);"\n"===l?(r||n++,t=1,r=!1):"\r"===l||"\u2028"===l||"\u2029"===l?(n++,t=1,r=!0):(t++,r=!1)}return{line:n,column:t}}function M(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t}var z={start:u,graphStmt:l,stmtList:o,stmt:i,attrStmt:s,inlineAttrStmt:a,nodeStmt:c,edgeStmt:f,subgraphStmt:h,attrList:d,attrListBlock:p,aList:g,edgeRHS:v,idDef:y,nodeIdOrSubgraph:E,nodeId:_,port:b,compassPt:m,id:w,node:k,edge:A,graph:N,digraph:x,subgraph:S,strict:O,graphType:j,whitespace:C,comment:G,_:L};if(void 0!==t){if(void 0===z[t])throw new Error("Invalid rule name: "+n(t)+".")}else t="start";var T,P=0,R=0,F=0,q=[],J=z[t]();if(null===J||P!==e.length){var Z=Math.max(P,F),K=Z<e.length?e.charAt(Z):null,Q=D();throw new this.SyntaxError(I(q),K,Z,Q.line,Q.column)}return J},toSource:function(){return this._source}};return e.SyntaxError=function(e,t,r,u,l){function o(e,t){var r,u;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return u=t?n(t):"end of input","Expected "+r+" but "+u+" found."}this.name="SyntaxError",this.expected=e,this.found=t,this.message=o(e,t),this.offset=r,this.line=u,this.column=l},e.SyntaxError.prototype=Error.prototype,e}()},{}],15:[function(n,e,t){var r=n("./parse"),u=n("./write");t.parse=t.decode=r,t.parseMany=r.parseMany,t.write=t.encode=u,t.type="dot",t.buffer=!1},{"./parse":16,"./write":18}],16:[function(n,e,t){function r(n){return u(n)[0]}function u(n){var e=s.parse(n);return e.map(function(n){return l(n)})}function l(n){function e(n,e){l.hasNode(n)||(l.addNode(n,c.get("node",{id:n})),void 0===l.node(n).label&&(l.node(n).label=n)),e&&o.mergeAttributes(e,l.node(n))}function t(n,e,t){var r=n+"-"+e,u=a[r];u||(u=a[r]=0),a[r]++;var i=t.id||r+"-"+u,s={};o.mergeAttributes(c.get("edge",t),s),o.mergeAttributes({id:i},s),l.addEdge(i,n,e,s)}function r(n){function e(n){u.push(n)}var t,r={},u=[];for(e(n);0!==u.length;)switch(t=u.pop(),t.type){case"node":r[t.id]=!0;break;case"edge":t.elems.forEach(e);break;case"subgraph":t.stmts.forEach(e)}return Object.keys(r)}function u(n){var l=n.attrs;switch(n.type){case"node":e(n.id,l);break;case"edge":var o,i;n.elems.forEach(function(n){switch(u(n),n.type){case"node":i=[n.id];break;case"subgraph":i=r(n);break;default:throw new Error("Unsupported type incident on edge: "+n.type)}o&&o.forEach(function(n){i.forEach(function(e){t(n,e,l),s&&t(e,n,l)})}),o=i});break;case"subgraph":c.enterSubDigraph(),n.stmts&&n.stmts.forEach(function(n){u(n)}),c.exitSubDigraph();break;case"attr":c.set(n.attrType,l);break;default:throw new Error("Unsupported statement type: "+n.type)}}var l=new i,s="graph"===n.type;l.type=n.type;var a={},c={_default:{},get:function(n,e){if("undefined"!=typeof this._default[n]){var t={};return o.mergeAttributes(this._default[n],t),o.mergeAttributes(e,t),t}return e},set:function(n,e){this._default[n]=this.get(n,e)},enterSubDigraph:function(){function n(){}n.prototype=this._default;var e=new n;this._default=e},exitSubDigraph:function(){this._default=Object.getPrototypeOf(this._default)}};return n.stmts&&n.stmts.forEach(function(n){u(n)}),l}var o=n("./util"),i=n("graphlib").Digraph,s=n("./dot-grammar");e.exports=r,e.exports.parseMany=u,t.toObjects=function(n){var e=t.toDigraph(n),r=e.nodes().map(function(n){return e.node(n)}),u=e.edges().map(function(n){var t=e.edge(n);return t.source=e.node(e.source(n)),t.target=e.node(e.target(n)),t});return{nodes:r,edges:u}}},{"./dot-grammar":14,"./util":17,graphlib:19}],17:[function(n,e,t){t.mergeAttributes=function(n,e){Object.keys(n).forEach(function(t){e[t]=n[t]})},t.min=function(n){return Math.min.apply(null,n)},t.max=function(n){return Math.max.apply(null,n)},t.all=function(n,e){for(var t=0;t<n.length;++t)if(!e(n[t]))return!1;return!0},t.sum=function(n){return n.reduce(function(n,e){return n+e},0)},t.concat=function(n){return Array.prototype.concat.apply([],n)},t.values=function(n){return Object.keys(n).map(function(e){return n[e]})},t.union=function(n){for(var e={},t=0;t<n.length;++t)for(var r=n[t],u=0;u<r.length;++u){var l=r[u];e[l]=l}var o=[];for(var i in e)o.push(e[i]);return o},t.intersectRect=function(n,e){var t,r,u=n.x,l=n.y,o=e.x-u,i=e.y-l,s=n.width/2,a=n.height/2;return Math.abs(i)*s>Math.abs(o)*a?(0>i&&(a=-a),t=0===i?0:a*o/i,r=a):(0>o&&(s=-s),t=s,r=0===o?0:s*i/o),{x:u+t,y:l+r}},t.pointStr=function(n){return n.x+","+n.y},t.createTimer=function(n){var e={};return n=n||!1,e.enabled=function(t){return arguments.length?(n=t,e):n},e.wrap=function(e,t){return function(){var r=n?(new Date).getTime():null;try{return t.apply(null,arguments)}finally{r&&console.log(e+" time: "+((new Date).getTime()-r)+"ms")}}},e},t.propertyAccessor=function(n,e,t,r){return function(u){return arguments.length?(e[t]=u,r&&r(u),n):e[t]}}},{}],18:[function(n,e){function t(n){var e="digraph"==n.type?"->":"--",t=(n.type||"digraph")+" {\n";return n.nodes().forEach(function(e){t+=l(e,n.node(e))}),n.eachEdge(function(n,r,u,l){t+=o(n,e,r,u,l)}),t+="}\n"}function r(n){return'"'+n.toString().replace(/"/g,'\\"')+'"'}function u(n){return"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?r(JSON.stringify(n)):r(n)}function l(n,e){var t=r(n),l="    "+r(n),o=!1;for(var i in e)"label"!=i&&"id"!=i||r(e[i])==t||(o?l+=",":(l+=" [",o=!0),l+=r(i)+"="+u(e[i]));return o&&(l+="]"),l+="\n"}function o(n,e,t,l,o){r(n);var i="    "+r(t)+" "+e+" "+r(l),s=!1;for(var a in o)s?i+=",":(i+=" [",s=!0),i+=r(a)+"="+u(o[a]);return s&&(i+="]"),i+="\n"}e.exports=t},{}],19:[function(n,e,t){t.Digraph=n("./lib/Digraph"),t.alg=n("./lib/alg"),t.version=n("./lib/version"),t.Graph=t.Digraph},{"./lib/Digraph":20,"./lib/alg":21,"./lib/version":25}],20:[function(n,e){function t(){this._nodes={},this._inEdges={},this._outEdges={},this._edges={},this._nextEdgeId=0}function r(n,e,t){var r=n[e];r||(r=n[e]={count:0,edges:{}}),r.count++,r.edges[t]=!0}function u(n,e,t){var r=n[e];0===--r.count?delete n[e]:delete r.edges[t]}var l=n("./util");e.exports=t,t.prototype.subgraph=function(n){var e=new t,r=this;return n.forEach(function(n){e.addNode(n,r.node(n))}),l.values(this._edges).forEach(function(n){e.hasNode(n.source)&&e.hasNode(n.target)&&e.addEdge(n.id,n.source,n.target,r.edge(n.id))}),e},t.prototype.order=function(){return Object.keys(this._nodes).length},t.prototype.size=function(){return Object.keys(this._edges).length},t.prototype.hasNode=function(n){return n in this._nodes},t.prototype.node=function(n){return this._strictGetNode(n).value},t.prototype.nodes=function(){var n=[];return this.eachNode(function(e){n.push(e)}),n},t.prototype.eachNode=function(n){for(var e in this._nodes){var t=this._nodes[e];n(t.id,t.value)}},t.prototype.successors=function(n){return this._strictGetNode(n),Object.keys(this._outEdges[n]).map(function(n){return this._nodes[n].id},this)},t.prototype.predecessors=function(n){return this._strictGetNode(n),Object.keys(this._inEdges[n]).map(function(n){return this._nodes[n].id},this)},t.prototype.neighbors=function(n){this._strictGetNode(n);var e={};return Object.keys(this._outEdges[n]).map(function(n){e[n]=!0}),Object.keys(this._inEdges[n]).map(function(n){e[n]=!0}),Object.keys(e).map(function(n){return this._nodes[n].id},this)},t.prototype.sources=function(){var n=this;return this._filterNodes(function(e){return 0===n.inEdges(e).length})},t.prototype.sinks=function(){var n=this;return this._filterNodes(function(e){return 0===n.outEdges(e).length})},t.prototype.hasEdge=function(n){return n in this._edges},t.prototype.edge=function(n){return this._strictGetEdge(n).value},t.prototype.edges=function(n,e){var t,r;return arguments.length?1===arguments.length?l.mergeKeys([this.inEdges(n),this.outEdges(n)]):2===arguments.length?(this._strictGetNode(n),this._strictGetNode(e),r=this._outEdges[n],t=e in r?Object.keys(r[e].edges):[],t.map(function(n){return this._edges[n].id},this)):void 0:(t=[],this.eachEdge(function(n){t.push(n)}),t)},t.prototype.eachEdge=function(n){for(var e in this._edges){var t=this._edges[e];n(t.id,t.source,t.target,t.value)}},t.prototype.source=function(n){return this._strictGetEdge(n).source},t.prototype.target=function(n){return this._strictGetEdge(n).target},t.prototype.inEdges=function(n){return this._strictGetNode(n),l.concat(l.values(this._inEdges[n]).map(function(n){return Object.keys(n.edges)},this))},t.prototype.outEdges=function(n){return this._strictGetNode(n),l.concat(l.values(this._outEdges[n]).map(function(n){return Object.keys(n.edges)},this))},t.prototype.equals=function(n){var e=this;return e.order()===n.order()&&e.size()===n.size()&&l.all(e.nodes(),function(t){return n.hasNode(t)&&e.node(t)===n.node(t)})&&l.all(e.edges(),function(t){return n.hasEdge(t)&&e.edge(t)===n.edge(t)})},t.prototype.toString=function(){var n=this,e="GRAPH:\n";return e+="    Nodes:\n",Object.keys(this._nodes).forEach(function(t){e+="        "+t+": "+JSON.stringify(n._nodes[t].value)+"\n"}),e+="    Edges:\n",Object.keys(this._edges).forEach(function(t){var r=n._edges[t];e+="        "+t+" ("+r.source+" -> "+r.target+"): "+JSON.stringify(n._edges[t].value)+"\n"}),e},t.prototype.addNode=function(n,e){if(this.hasNode(n))throw new Error("Graph already has node '"+n+"':\n"+this.toString());this._nodes[n]={id:n,value:e},this._inEdges[n]={},this._outEdges[n]={}},t.prototype.delNode=function(n){this._strictGetNode(n);var e=this;this.edges(n).forEach(function(n){e.delEdge(n)}),delete this._inEdges[n],delete this._outEdges[n],delete this._nodes[n]},t.prototype.addEdge=function(n,e,t,u){if(this._strictGetNode(e),this._strictGetNode(t),null===n)n="_ANON-"+ ++this._nextEdgeId;else if(this.hasEdge(n))throw new Error("Graph already has edge '"+n+"':\n"+this.toString());this._edges[n]={id:n,source:e,target:t,value:u},r(this._inEdges[t],e,n),r(this._outEdges[e],t,n)},t.prototype.delEdge=function(n){var e=this._strictGetEdge(n);u(this._inEdges[e.target],e.source,n),u(this._outEdges[e.source],e.target,n),delete this._edges[n]},t.prototype._strictGetNode=function(n){var e=this._nodes[n];if(void 0===e)throw new Error("Node '"+n+"' is not in graph:\n"+this.toString());return e},t.prototype._strictGetEdge=function(n){var e=this._edges[n];if(void 0===e)throw new Error("Edge '"+n+"' is not in graph:\n"+this.toString());return e},t.prototype._filterNodes=function(n){var e=[];return this.eachNode(function(t){n(t)&&e.push(t)}),e}},{"./util":24}],21:[function(n,e){e.exports={isAcyclic:n("./alg/isAcyclic"),topsort:n("./alg/topsort")}},{"./alg/isAcyclic":22,"./alg/topsort":23}],22:[function(n,e){function t(n){try{r(n)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}var r=n("./topsort");e.exports=t},{"./topsort":23}],23:[function(n,e){function t(n){function e(o){if(o in u)throw new r;o in t||(u[o]=!0,t[o]=!0,n.predecessors(o).forEach(function(n){e(n)}),delete u[o],l.push(o))}var t={},u={},l=[],o=n.sinks();if(0!==n.order()&&0===o.length)throw new r;return n.sinks().forEach(function(n){e(n)}),l}function r(){}e.exports=t,t.CycleException=r,r.prototype.toString=function(){return"Graph has at least one cycle"}},{}],24:[function(n,e,t){t.all=function(n,e){for(var t=0;t<n.length;++t)if(!e(n[t]))return!1;return!0},t.values=function(n){return Object.keys(n).map(function(e){return n[e]})},t.concat=function(n){return Array.prototype.concat.apply([],n)},t.mergeKeys=function(n){var e={};return n.forEach(function(n){n.forEach(function(n){e[n]=n})}),t.values(e)}},{}],25:[function(n,e){e.exports="0.0.3"},{}],26:[function(n,e,t){t.Digraph=n("./lib/Digraph"),t.alg=n("./lib/alg"),t.version=n("./lib/version"),t.Graph=t.Digraph},{"./lib/Digraph":27,"./lib/alg":28,"./lib/version":34}],27:[function(n,e){function t(){this._value=void 0,this._nodes={},this._inEdges={},this._outEdges={},this._edges={},this._nextEdgeId=0}function r(n,e,t){var r=n[e];r||(r=n[e]={count:0,edges:{}}),r.count++,r.edges[t]=!0}function u(n,e,t){var r=n[e];0===--r.count?delete n[e]:delete r.edges[t]}var l=n("./util");e.exports=t,t.prototype.subgraph=function(n){var e=new t,r=this;return n.forEach(function(n){e.addNode(n,r.node(n))}),l.values(this._edges).forEach(function(n){e.hasNode(n.source)&&e.hasNode(n.target)&&e.addEdge(n.id,n.source,n.target,r.edge(n.id))}),e},t.prototype.order=function(){return Object.keys(this._nodes).length},t.prototype.size=function(){return Object.keys(this._edges).length},t.prototype.graph=function(n){return 0===arguments.length?this._value:(this._value=n,void 0)},t.prototype.hasNode=function(n){return n in this._nodes},t.prototype.node=function(n,e){var t=this._strictGetNode(n);return 1===arguments.length?t.value:(t.value=e,void 0)},t.prototype.nodes=function(){var n=[];return this.eachNode(function(e){n.push(e)}),n},t.prototype.eachNode=function(n){for(var e in this._nodes){var t=this._nodes[e];n(t.id,t.value)}},t.prototype.successors=function(n){return this._strictGetNode(n),Object.keys(this._outEdges[n]).map(function(n){return this._nodes[n].id},this)},t.prototype.predecessors=function(n){return this._strictGetNode(n),Object.keys(this._inEdges[n]).map(function(n){return this._nodes[n].id},this)},t.prototype.neighbors=function(n){this._strictGetNode(n);var e={};return Object.keys(this._outEdges[n]).map(function(n){e[n]=!0}),Object.keys(this._inEdges[n]).map(function(n){e[n]=!0}),Object.keys(e).map(function(n){return this._nodes[n].id},this)},t.prototype.sources=function(){var n=this;return this._filterNodes(function(e){return 0===n.inEdges(e).length})},t.prototype.sinks=function(){var n=this;return this._filterNodes(function(e){return 0===n.outEdges(e).length})},t.prototype.hasEdge=function(n){return n in this._edges},t.prototype.edge=function(n,e){var t=this._strictGetEdge(n);return 1===arguments.length?t.value:(t.value=e,void 0)},t.prototype.edges=function(n,e){var t,r;return arguments.length?1===arguments.length?l.mergeKeys([this.inEdges(n),this.outEdges(n)]):2===arguments.length?(this._strictGetNode(n),this._strictGetNode(e),r=this._outEdges[n],t=e in r?Object.keys(r[e].edges):[],t.map(function(n){return this._edges[n].id},this)):void 0:(t=[],this.eachEdge(function(n){t.push(n)}),t)},t.prototype.eachEdge=function(n){for(var e in this._edges){var t=this._edges[e];n(t.id,t.source,t.target,t.value)}},t.prototype.source=function(n){return this._strictGetEdge(n).source},t.prototype.target=function(n){return this._strictGetEdge(n).target},t.prototype.inEdges=function(n){return this._strictGetNode(n),l.concat(l.values(this._inEdges[n]).map(function(n){return Object.keys(n.edges)},this))},t.prototype.outEdges=function(n){return this._strictGetNode(n),l.concat(l.values(this._outEdges[n]).map(function(n){return Object.keys(n.edges)},this))},t.prototype.equals=function(n){var e=this;return e.order()===n.order()&&e.size()===n.size()&&l.all(e.nodes(),function(t){return n.hasNode(t)&&e.node(t)===n.node(t)})&&l.all(e.edges(),function(t){return n.hasEdge(t)&&e.edge(t)===n.edge(t)})},t.prototype.toString=function(){var n=this,e="GRAPH: "+JSON.stringify(n._value)+"\n";return e+="    Nodes:\n",Object.keys(this._nodes).forEach(function(t){e+="        "+t+": "+JSON.stringify(n._nodes[t].value)+"\n"}),e+="    Edges:\n",Object.keys(this._edges).forEach(function(t){var r=n._edges[t];e+="        "+t+" ("+r.source+" -> "+r.target+"): "+JSON.stringify(n._edges[t].value)+"\n"}),e},t.prototype.addNode=function(n,e){if(this.hasNode(n))throw new Error("Graph already has node '"+n+"':\n"+this.toString());this._nodes[n]={id:n,value:e},this._inEdges[n]={},this._outEdges[n]={}},t.prototype.delNode=function(n){this._strictGetNode(n);var e=this;this.edges(n).forEach(function(n){e.delEdge(n)}),delete this._inEdges[n],delete this._outEdges[n],delete this._nodes[n]},t.prototype.addEdge=function(n,e,t,u){if(this._strictGetNode(e),this._strictGetNode(t),null===n)n="_ANON-"+ ++this._nextEdgeId;else if(this.hasEdge(n))throw new Error("Graph already has edge '"+n+"':\n"+this.toString());this._edges[n]={id:n,source:e,target:t,value:u},r(this._inEdges[t],e,n),r(this._outEdges[e],t,n)},t.prototype.delEdge=function(n){var e=this._strictGetEdge(n);u(this._inEdges[e.target],e.source,n),u(this._outEdges[e.source],e.target,n),delete this._edges[n]},t.prototype._strictGetNode=function(n){var e=this._nodes[n];if(void 0===e)throw new Error("Node '"+n+"' is not in graph:\n"+this.toString());return e},t.prototype._strictGetEdge=function(n){var e=this._edges[n];if(void 0===e)throw new Error("Edge '"+n+"' is not in graph:\n"+this.toString());return e},t.prototype._filterNodes=function(n){var e=[];return this.eachNode(function(t){n(t)&&e.push(t)}),e}},{"./util":33}],28:[function(n,e){e.exports={isAcyclic:n("./alg/isAcyclic"),findCycles:n("./alg/findCycles"),tarjan:n("./alg/tarjan"),topsort:n("./alg/topsort")}},{"./alg/findCycles":29,"./alg/isAcyclic":30,"./alg/tarjan":31,"./alg/topsort":32}],29:[function(n,e){function t(n){return r(n).filter(function(n){return n.length>1})}var r=n("./tarjan");e.exports=t},{"./tarjan":31}],30:[function(n,e){function t(n){try{r(n)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}var r=n("./topsort");e.exports=t},{"./topsort":32}],31:[function(n,e){function t(n){function e(l){var o=u[l]={onStack:!0,lowlink:t,index:t++};if(r.push(l),n.successors(l).forEach(function(n){n in u?u[n].onStack&&(o.lowlink=Math.min(o.lowlink,u[n].index)):(e(n),o.lowlink=Math.min(o.lowlink,u[n].lowlink))}),o.lowlink===o.index){var i,s=[];do i=r.pop(),u[i].onStack=!1,s.push(i);while(l!==i);results.push(s)}}var t=0,r=[],u={};return results=[],n.nodes().forEach(function(n){n in u||e(n)}),results}e.exports=t},{}],32:[function(n,e){function t(n){function e(o){if(o in u)throw new r;o in t||(u[o]=!0,t[o]=!0,n.predecessors(o).forEach(function(n){e(n)}),delete u[o],l.push(o))}var t={},u={},l=[],o=n.sinks();if(0!==n.order()&&0===o.length)throw new r;return n.sinks().forEach(function(n){e(n)}),l}function r(){}e.exports=t,t.CycleException=r,r.prototype.toString=function(){return"Graph has at least one cycle"}},{}],33:[function(n,e,t){t.all=function(n,e){for(var t=0;t<n.length;++t)if(!e(n[t]))return!1;return!0},t.values=function(n){return Object.keys(n).map(function(e){return n[e]})},t.concat=function(n){return Array.prototype.concat.apply([],n)},t.mergeKeys=function(n){var e={};return n.forEach(function(n){n.forEach(function(n){e[n]=n})}),t.values(e)}},{}],34:[function(n,e){e.exports="0.0.5"},{}]},{},[1]);