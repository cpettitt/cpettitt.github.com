(function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var j=typeof require=="function"&&require;if(!h&&j)return j(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}var f=typeof require=="function"&&require;for(var g=0;g<d.length;g++)e(d[g]);return e})({1:[function(a,b,c){var d=self;d.graphlib=a("./index")},{"./index":2}],2:[function(a,b,c){c.Digraph=a("./lib/Digraph");c.alg=a("./lib/alg");c.version=a("./lib/version");c.Graph=c.Digraph},{"./lib/Digraph":3,"./lib/alg":4,"./lib/version":10}],3:[function(a,b,c){function e(){this._value=undefined;this._nodes={};this._inEdges={};this._outEdges={};this._edges={};this._nextEdgeId=0}function f(a,b,c){var d=a[b];d||(d=a[b]={count:0,edges:{}});d.count++;d.edges[c]=!0}function g(a,b,c){var d=a[b];--d.count===0?delete a[b]:delete d.edges[c]}var d=a("./util");b.exports=e;e.prototype.subgraph=function(a){var b=new e,c=this;a.forEach(function(a){b.addNode(a,c.node(a))});d.values(this._edges).forEach(function(a){b.hasNode(a.source)&&b.hasNode(a.target)&&b.addEdge(a.id,a.source,a.target,c.edge(a.id))});return b};e.prototype.order=function(){return Object.keys(this._nodes).length};e.prototype.size=function(){return Object.keys(this._edges).length};e.prototype.graph=function(a){if(arguments.length===0)return this._value;this._value=a};e.prototype.hasNode=function(a){return a in this._nodes};e.prototype.node=function(a,b){var c=this._strictGetNode(a);if(arguments.length===1)return c.value;c.value=b};e.prototype.nodes=function(){var a=[];this.eachNode(function(b,c){a.push(b)});return a};e.prototype.eachNode=function(a){for(var b in this._nodes){var c=this._nodes[b];a(c.id,c.value)}};e.prototype.successors=function(a){this._strictGetNode(a);return Object.keys(this._outEdges[a]).map(function(a){return this._nodes[a].id},this)};e.prototype.predecessors=function(a){this._strictGetNode(a);return Object.keys(this._inEdges[a]).map(function(a){return this._nodes[a].id},this)};e.prototype.neighbors=function(a){this._strictGetNode(a);var b={};Object.keys(this._outEdges[a]).map(function(a){b[a]=!0});Object.keys(this._inEdges[a]).map(function(a){b[a]=!0});return Object.keys(b).map(function(a){return this._nodes[a].id},this)};e.prototype.sources=function(){var a=this;return this._filterNodes(function(b){return a.inEdges(b).length===0})};e.prototype.sinks=function(){var a=this;return this._filterNodes(function(b){return a.outEdges(b).length===0})};e.prototype.hasEdge=function(a){return a in this._edges};e.prototype.edge=function(a,b){var c=this._strictGetEdge(a);if(arguments.length===1)return c.value;c.value=b};e.prototype.edges=function(a,b){var c,e;if(!arguments.length){c=[];this.eachEdge(function(a){c.push(a)});return c}if(arguments.length===1)return d.mergeKeys([this.inEdges(a),this.outEdges(a)]);if(arguments.length===2){this._strictGetNode(a);this._strictGetNode(b);e=this._outEdges[a];c=b in e?Object.keys(e[b].edges):[];return c.map(function(a){return this._edges[a].id},this)}};e.prototype.eachEdge=function(a){for(var b in this._edges){var c=this._edges[b];a(c.id,c.source,c.target,c.value)}};e.prototype.source=function(a){return this._strictGetEdge(a).source};e.prototype.target=function(a){return this._strictGetEdge(a).target};e.prototype.inEdges=function(a){this._strictGetNode(a);return d.concat(d.values(this._inEdges[a]).map(function(a){return Object.keys(a.edges)},this))};e.prototype.outEdges=function(a){this._strictGetNode(a);return d.concat(d.values(this._outEdges[a]).map(function(a){return Object.keys(a.edges)},this))};e.prototype.equals=function(a){var b=this;return b.order()===a.order()&&b.size()===a.size()&&d.all(b.nodes(),function(c){return a.hasNode(c)&&b.node(c)===a.node(c)})&&d.all(b.edges(),function(c){return a.hasEdge(c)&&b.edge(c)===a.edge(c)})};e.prototype.toString=function(){var a=this,b="GRAPH: "+JSON.stringify(a._value)+"\n";b+="    Nodes:\n";Object.keys(this._nodes).forEach(function(c){b+="        "+c+": "+JSON.stringify(a._nodes[c].value)+"\n"});b+="    Edges:\n";Object.keys(this._edges).forEach(function(c){var d=a._edges[c];b+="        "+c+" ("+d.source+" -> "+d.target+"): "+JSON.stringify(a._edges[c].value)+"\n"});return b};e.prototype.addNode=function(a,b){if(this.hasNode(a))throw new Error("Graph already has node '"+a+"':\n"+this.toString());this._nodes[a]={id:a,value:b};this._inEdges[a]={};this._outEdges[a]={}};e.prototype.delNode=function(a){this._strictGetNode(a);var b=this;this.edges(a).forEach(function(a){b.delEdge(a)});delete this._inEdges[a];delete this._outEdges[a];delete this._nodes[a]};e.prototype.addEdge=function(a,b,c,d){this._strictGetNode(b);this._strictGetNode(c);if(a===null)a="_ANON-"+ ++this._nextEdgeId;else if(this.hasEdge(a))throw new Error("Graph already has edge '"+a+"':\n"+this.toString());this._edges[a]={id:a,source:b,target:c,value:d};f(this._inEdges[c],b,a);f(this._outEdges[b],c,a)};e.prototype.delEdge=function(a){var b=this._strictGetEdge(a);g(this._inEdges[b.target],b.source,a);g(this._outEdges[b.source],b.target,a);delete this._edges[a]};e.prototype._strictGetNode=function(a){var b=this._nodes[a];if(b===undefined)throw new Error("Node '"+a+"' is not in graph:\n"+this.toString());return b};e.prototype._strictGetEdge=function(a){var b=this._edges[a];if(b===undefined)throw new Error("Edge '"+a+"' is not in graph:\n"+this.toString());return b};e.prototype._filterNodes=function(a){var b=[];this.eachNode(function(c,d){a(c)&&b.push(c)});return b}},{"./util":9}],4:[function(a,b,c){b.exports={isAcyclic:a("./alg/isAcyclic"),findCycles:a("./alg/findCycles"),tarjan:a("./alg/tarjan"),topsort:a("./alg/topsort")}},{"./alg/findCycles":5,"./alg/isAcyclic":6,"./alg/tarjan":7,"./alg/topsort":8}],5:[function(a,b,c){function e(a){return d(a).filter(function(a){return a.length>1})}var d=a("./tarjan");b.exports=e},{"./tarjan":7}],6:[function(a,b,c){function e(a){try{d(a)}catch(b){if(b instanceof d.CycleException)return!1;throw b}return!0}var d=a("./topsort");b.exports=e},{"./topsort":8}],7:[function(a,b,c){function d(a){function e(f){var h=d[f]={onStack:!0,lowlink:b,index:b++};c.push(f);a.successors(f).forEach(function(a){if(a in d)d[a].onStack&&(h.lowlink=Math.min(h.lowlink,d[a].index));else{e(a);h.lowlink=Math.min(h.lowlink,d[a].lowlink)}});if(h.lowlink===h.index){var i=[],j;do{j=c.pop();d[j].onStack=!1;i.push(j)}while(f!==j);results.push(i)}}var b=0,c=[],d={};results=[];a.nodes().forEach(function(a){a in d||e(a)});return results}b.exports=d},{}],8:[function(a,b,c){function d(a){function f(g){if(g in c)throw new e;if(!(g in b)){c[g]=!0;b[g]=!0;a.predecessors(g).forEach(function(a){f(a)});delete c[g];d.push(g)}}var b={},c={},d=[],g=a.sinks();if(a.order()!==0&&g.length===0)throw new e;a.sinks().forEach(function(a){f(a)});return d}function e(){}b.exports=d;d.CycleException=e;e.prototype.toString=function(){return"Graph has at least one cycle"}},{}],9:[function(a,b,c){c.all=function(a,b){for(var c=0;c<a.length;++c)if(!b(a[c]))return!1;return!0};c.values=function(a){return Object.keys(a).map(function(b){return a[b]})};c.concat=function(a){return Array.prototype.concat.apply([],a)};c.mergeKeys=function(a){var b={};a.forEach(function(a){a.forEach(function(a){b[a]=a})});return c.values(b)}},{}],10:[function(a,b,c){b.exports="0.0.5"},{}]},{},[1]);