(function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var j=typeof require=="function"&&require;if(!h&&j)return j(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}var f=typeof require=="function"&&require;for(var g=0;g<d.length;g++)e(d[g]);return e})({1:[function(a,b,c){var d=self;d.dagreD3={Digraph:a("graphlib").Digraph,Renderer:a("./lib/Renderer"),json:a("graphlib").converter.json,layout:a("dagre").layout,version:a("./lib/version")}},{"./lib/Renderer":2,"./lib/version":3,dagre:4,graphlib:12}],2:[function(a,b,c){function e(){this._layout=d();this._drawNode=o;this._drawEdgeLabel=p;this._drawEdge=q;this._postLayout=r;this._postRender=s}function f(a){var b=a.copy();b.nodes().forEach(function(a){var c=b.node(a);if(c===undefined){c={};b.node(a,c)}"label"in c||(c.label="")});b.edges().forEach(function(a){var c=b.edge(a);if(c===undefined){c={};b.edge(a,c)}"label"in c||(c.label="")});return b}function g(a,b){return b.selectAll("g .node").data(a.nodes()).enter().append("g").classed("node",!0)}function h(a,b){return b.selectAll("g .edge").data(a.edges()).enter().insert("g","*").classed("edge",!0)}function i(a,b,c){c.each(function(c){b(a,c,d3.select(this))}).each(function(b){l(this,a.node(b))})}function j(a,b,c){c.append("g").each(function(c){b(a,c,d3.select(this))}).each(function(b){l(this,a.edge(b))})}function k(a,b,c){c.each(function(c){b(a,c,d3.select(this))})}function l(a,b){var c=a.getBBox();b.width=c.width;b.height=c.height}function m(a,b){var c=b.run(a);a.eachNode(function(a,b){c.node(a).label=b.label});a.eachEdge(function(a,b,d,e){c.edge(a).label=e.label});return c}function n(a,b,c){b.attr("transform",function(b){var c=a.node(b);return"translate("+c.x+","+c.y+")"});c.selectAll("g .edge-label").attr("transform",function(b){var c=a.edge(b),d=w(c.points);return"translate("+d.x+","+d.y+")"})}function o(a,b,c){var d=c.append("g").attr("class","label");t(a.node(b).label,d,10,10)}function p(a,b,c){var d=c.append("g").attr("class","edge-label");t(a.edge(b).label,d,0,0)}function q(a,b,c){c.insert("path","*").attr("marker-end","url(#arrowhead)").attr("d",function(){var c=a.edge(b),d=a.node(a.incidentNodes(b)[0]),e=a.node(a.incidentNodes(b)[1]),f=c.points,g=f.length===0?e:f[0],h=f.length===0?d:f[f.length-1];f.unshift(x(d,g));f.push(x(e,h));return d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("bundle").tension(.95)(f)})}function r(){}function s(a,b){a.isDirected()&&b.select("#arrowhead").empty()&&b.append("svg:defs").append("svg:marker").attr("id","arrowhead").attr("viewBox","0 0 10 10").attr("refX",8).attr("refY",5).attr("markerUnits","strokewidth").attr("markerWidth",8).attr("markerHeight",5).attr("orient","auto").attr("style","fill: #333").append("svg:path").attr("d","M 0 0 L 10 5 L 0 10 z")}function t(a,b,c,d){var e=b.append("rect"),f=b.append("g");if(a[0]==="<"){u(a,f);c=d=0}else v(a,f);var g=b.node().getBBox();f.attr("transform","translate("+ -g.width/2+","+ -g.height/2+")");e.attr("rx",5).attr("ry",5).attr("x",-(g.width/2+c)).attr("y",-(g.height/2+d)).attr("width",g.width+2*c).attr("height",g.height+2*d)}function u(a,b){var c=b.append("foreignObject").attr("width","100000"),d,e;c.append("xhtml:div").style("float","left").html(function(){return a}).each(function(){d=this.clientWidth;e=this.clientHeight});c.attr("width",d).attr("height",e)}function v(a,b){b.append("text").attr("text-anchor","left").append("tspan").attr("dy","1em").text(function(){return a})}function w(a){var b=a.length/2;if(a.length%2)return a[Math.floor(b)];var c=a[b-1],d=a[b];return{x:(c.x+d.x)/2,y:(c.y+d.y)/2}}function x(a,b){var c=a.x,d=a.y,e=b.x-c,f=b.y-d,g=a.width/2,h=a.height/2,i,j;if(Math.abs(f)*g>Math.abs(e)*h){f<0&&(h=-h);i=f===0?0:h*e/f;j=h}else{e<0&&(g=-g);i=g;j=e===0?0:g*f/e}return{x:c+i,y:d+j}}var d=a("dagre").layout;b.exports=e;e.prototype.layout=function(a){if(!arguments.length)return this._layout;this._layout=a;return this};e.prototype.drawNode=function(a){if(!arguments.length)return this._drawNode;this._drawNode=a;return this};e.prototype.drawEdgeLabel=function(a){if(!arguments.length)return this._drawEdgeLabel;this._drawEdgeLabel=a;return this};e.prototype.drawEdge=function(a){if(!arguments.length)return this._drawEdge;this._drawEdge=a;return this};e.prototype.postLayout=function(a){if(!arguments.length)return this._postLayout;this._postLayout=a;return this};e.prototype.postRender=function(a){if(!arguments.length)return this._postRender;this._postRender=a;return this};e.prototype.run=function(a,b){a=f(a);var c=g(a,b),d=h(a,b);i(a,this._drawNode,c);j(a,this._drawEdgeLabel,d);var e=m(a,this._layout);this._postLayout(e,b);k(e,this._drawEdge,d);n(e,c,d);this._postRender(e,b);return e}},{dagre:4}],3:[function(a,b,c){b.exports="0.0.1"},{}],4:[function(a,b,c){c.Digraph=a("graphlib").Digraph;c.Graph=a("graphlib").Graph;c.layout=a("./lib/layout/layout");c.version=a("./lib/version")},{"./lib/layout/layout":6,"./lib/version":11,graphlib:12}],5:[function(a,b,c){function e(a,b){var c=d.createTimer(),e=d.createTimer().wrap("Acyclic Phase",f)(a);b>=2&&console.log("Acyclic Phase: reversed "+e+" edge(s)")}function f(a){function e(f){if(f in c)return;c[f]=b[f]=!0;a.outEdges(f).forEach(function(c){var g=a.target(c),h;if(g in b){h=a.edge(c);a.delEdge(c);h.reversed=!0;++d;a.addEdge(c,g,f,h)}else e(g)});delete b[f]}var b={},c={},d=0;a.eachNode(function(a){e(a)});return d}function g(a){a.eachEdge(function(b,c,d,e){if(e.reversed){delete e.reversed;a.delEdge(b);a.addEdge(b,d,c,e)}})}var d=a("../util");b.exports=e;b.exports.undo=g},{"../util":10}],6:[function(a,b,c){var d=a("../util"),e=a("./rank"),f=a("./acyclic"),g=a("graphlib").Digraph,h=a("graphlib").Graph,i=a("graphlib").data.Set;b.exports=function(){function m(a){var b=new g;a.eachNode(function(a,c){c===undefined&&(c={});b.addNode(a,{width:c.width,height:c.height})});a.eachEdge(function(c,d,e,f){f===undefined&&(f={});var g={e:c,minLen:f.minLen||1,width:f.width||0,height:f.height||0,points:[]};b.addEdge(null,d,e,g);a.isDirected()||b.addEdge(null,e,d,g)});return b}function n(a){var c=l.rankSep(),d;try{d=m(a);if(d.order()===0)return d;d.eachEdge(function(a,b,c,d){d.minLen*=2});l.rankSep(c/2);f(d,b.debugLevel);a.isDirected()||o(d);e(d,b.debugLevel);p(d);j.run(d);k.run(d);q(d);r(d);f.undo(d);return s(d,a.isDirected())}finally{l.rankSep(c)}}function o(a){var b=new i;a.eachEdge(function(c,d,e,f){b.has(f.e)&&a.delEdge(c);b.add(f.e)})}function p(a){var b=0;a.eachEdge(function(c,d,e,f){var g=a.node(d).rank,h=a.node(e).rank;if(g+1<h){for(var i=d,j=g+1,k=0;j<h;++j,++k){var l="_D"+ ++b,m={width:f.width,height:f.height,edge:{id:c,source:d,target:e,attrs:f},rank:j,dummy:!0};k===0?m.index=0:j+1===h&&(m.index=1);a.addNode(l,m);a.addEdge(null,i,l,{});i=l}a.addEdge(null,i,e,{});a.delEdge(c)}})}function q(a){a.eachNode(function(b,c){if(c.dummy&&"index"in c){var d=c.edge;a.hasEdge(d.id)||a.addEdge(d.id,d.source,d.target,d.attrs);var e=a.edge(d.id).points;e[c.index]={x:c.x,y:c.y,ul:c.ul,ur:c.ur,dl:c.dl,dr:c.dr};a.delNode(b)}})}function r(a){a.eachEdge(function(a,b,c,d){d.reversed&&d.points.reverse()})}function s(a,b){var c=b?new g:new h;a.eachNode(function(a,b){c.addNode(a,b)});a.eachEdge(function(a,b,d,e){c.addEdge("e"in e?e.e:a,b,d,e);delete e.e});return c}function t(a){return function(){if(!arguments.length)return a();a.apply(null,arguments);return l}}var b={debugLevel:0},c=d.createTimer(),j=a("./order")(),k=a("./position")(),l={};l.orderIters=t(j.iterations);l.nodeSep=t(k.nodeSep);l.edgeSep=t(k.edgeSep);l.universalSep=t(k.universalSep);l.rankSep=t(k.rankSep);l.rankDir=t(k.rankDir);l.debugAlignment=t(k.debugAlignment);l.debugLevel=d.propertyAccessor(l,b,"debugLevel",function(a){c.enabled(a);j.debugLevel(a);k.debugLevel(a)});l.run=c.wrap("Total layout",n);l._normalize=p;return l}},{"../util":10,"./acyclic":5,"./order":7,"./position":8,"./rank":9,graphlib:12}],7:[function(a,b,c){function e(a){var b={};a.forEach(function(a,c){b[a]=c});return b}var d=a("../util");b.exports=function(){function f(b){var c=g(b),d=m(c),e=n(b,c);a.debugLevel>=2&&console.log("Order phase start cross count: "+e);var f,h,i;for(h=0,i=0;i<4&&h<a.iterations;++h,++i){f=j(b,h,c);if(f<e){d=m(c);e=f;i=0}a.debugLevel>=3&&console.log("Order phase iter "+h+" cross count: "+e)}d.forEach(function(a){a.forEach(function(a,c){b.node(a).order=c})});if(a.debugLevel>=2){console.log("Order iterations: "+h);console.log("Order phase best cross count: "+e)}if(a.debugLevel>=4){console.log("Final layering:");d.forEach(function(a,b){console.log("Layer: "+b,a)})}return d}function g(a){var b=[];a.eachNode(function(a,c){var d=b[c.rank]||(b[c.rank]=[]);d.push(a)});return b}function h(a){return function(b){var c=[];a.inEdges(b).forEach(function(b){c.push(a.source(b))});return c}}function i(a){return function(b){var c=[];a.outEdges(b).forEach(function(b){c.push(a.target(b))});return c}}function j(a,b,c){var d;if(b%2===0)for(d=1;d<c.length;++d)k(c[d],h(a),e(c[d-1]));else for(d=c.length-2;d>=0;--d)k(c[d],i(a),e(c[d+1]));return n(a,c)}function k(a,b,c){var d=e(a),f=l(a,b,c),g=a.filter(function(a){return f[a]!==-1});g.sort(function(a,b){return f[a]-f[b]||d[a]-d[b]});for(var h=a.length-1;h>=0;--h)f[a[h]]!==-1&&(a[h]=g.pop())}function l(a,b,c){var e={};a.forEach(function(a){var f=b(a),g=-1;f.length>0&&(g=d.sum(f.map(function(a){return c[a]}))/f.length);e[a]=g});return e}function m(a){return a.map(function(a){return a.slice(0)})}function n(a,b){var c=0,d;b.forEach(function(b){d&&(c+=o(a,d,b));d=b});return c}function o(a,b,c){var d=e(c),f=[];b.forEach(function(b){var c=[];a.outEdges(b).forEach(function(b){c.push(d[a.target(b)])});c.sort(function(a,b){return a-b});f=f.concat(c)});var g=1;while(g<c.length)g<<=1;var h=2*g-1;g-=1;var i=[];for(var j=0;j<h;++j)i[j]=0;var k=0;f.forEach(function(a){var b=a+g;++i[b];var c=0;while(b>0){b%2&&(k+=i[b+1]);b=b-1>>1;++i[b]}});return k}var a={iterations:24,debugLevel:0},b=d.createTimer(),c={};c.iterations=d.propertyAccessor(c,a,"iterations");c.debugLevel=d.propertyAccessor(c,a,"debugLevel",function(a){b.enabled(a)});c._initOrder=g;c.run=b.wrap("Order Phase",f);c.crossCount=n;c.bilayerCrossCount=o;return c}},{"../util":10}],8:[function(a,b,c){var d=a("../util");b.exports=function(){function e(b){var c=[];b.eachNode(function(a,b){var d=c[b.rank]||(c[b.rank]=[]);d[b.order]=a});var e=g(b,c),f={};["u","d"].forEach(function(d){d==="d"&&c.reverse();["l","r"].forEach(function(g){g==="r"&&n(c);var j=d+g,k=h(b,c,e,d==="u"?"predecessors":"successors");f[j]=i(b,c,k.pos,k.root,k.align);a.debugLevel>=3&&u(d+g,b,c,f[j]);g==="r"&&m(f[j]);g==="r"&&n(c)});d==="d"&&c.reverse()});l(b,c,f);b.eachNode(function(a){var c=[];for(var d in f){s(d,b,a,f[d][a]);c.push(f[d][a])}c.sort(function(a,b){return a-b});r(b,a,(c[1]+c[2])/2)});var j=d.min(b.nodes().map(function(a){return r(b,a)-o(b,a)/2}));b.eachNode(function(a){r(b,a,r(b,a)-j)});var k=0;c.forEach(function(c){var e=d.max(c.map(function(a){return p(b,a)}));k+=e/2;c.forEach(function(a){t(b,a,k)});k+=e/2+a.rankSep})}function f(a,b){return a<b?a.toString().length+":"+a+"-"+b:b.toString().length+":"+b+"-"+a}function g(a,b){var c={},d={};if(b.length<=2)return c;b[1].forEach(function(a,b){d[a]=b});for(var e=1;e<b.length-1;++e){var g=b[e],h=b[e+1],i=0,j=0;for(var k=0;k<h.length;++k){var l=h[k];d[l]=k;var m=undefined;if(a.node(l).dummy){var n=a.predecessors(l)[0];a.node(n).dummy&&(m=d[n])}m===undefined&&k===h.length-1&&(m=g.length-1);if(m!==undefined){for(;j<=k;++j)a.predecessors(h[j]).forEach(function(a){var b=d[a];if(b<i||b>m)c[f(h[j],a)]=!0});i=m}}}return c}function h(a,b,c,d){var e={},g={},h={};b.forEach(function(a){a.forEach(function(a,b){g[a]=a;h[a]=a;e[a]=b})});b.forEach(function(b){var i=-1;b.forEach(function(b){var j=a[d](b),k;if(j.length>0){j.sort(function(a,b){return e[a]-e[b]});k=(j.length-1)/2;j.slice(Math.floor(k),Math.ceil(k)+1).forEach(function(a){if(h[b]===b&&!c[f(a,b)]&&i<e[a]){h[a]=b;h[b]=g[b]=g[a];i=e[a]}})}})});return{pos:e,root:g,align:h}}function i(a,b,c,e,f){function l(a,b,c){b in h[a]?h[a][b]=Math.min(h[a][b],c):h[a][b]=c}function m(b){if(!(b in k)){k[b]=0;var d=b;do{if(c[d]>0){var h=e[j[d]];m(h);g[b]===b&&(g[b]=g[h]);var i=q(a,j[d])+q(a,d);g[b]!==g[h]?l(g[h],g[b],k[b]-k[h]-i):k[b]=Math.max(k[b],k[h]+i)}d=f[d]}while(d!==b)}}var g={},h={},i={},j={},k={};b.forEach(function(a){a.forEach(function(b,c){g[b]=b;h[b]={};c>0&&(j[b]=a[c-1])})});d.values(e).forEach(function(a){m(a)});b.forEach(function(a){a.forEach(function(a){k[a]=k[e[a]];if(a===e[a]&&a===g[a]){var b=0;a in h&&Object.keys(h[a]).length>0&&(b=d.min(Object.keys(h[a]).map(function(b){return h[a][b]+(b in i?i[b]:0)})));i[a]=b}})});b.forEach(function(a){a.forEach(function(a){k[a]+=i[g[e[a]]]||0})});return k}function j(a,b,c){return d.min(b.map(function(a){var b=a[0];return c[b]}))}function k(a,b,c){return d.max(b.map(function(a){var b=a[a.length-1];return c[b]}))}function l(a,b,c){var d={},e={},f,g={},h=Number.POSITIVE_INFINITY;for(var i in c){var l=c[i];d[i]=j(a,b,l);e[i]=k(a,b,l);var m=e[i]-d[i];if(m<h){h=m;f=i}}["u","d"].forEach(function(a){["l","r"].forEach(function(b){var c=a+b;g[c]=b==="l"?d[f]-d[c]:e[f]-e[c]})});for(var i in c)a.eachNode(function(a){c[i][a]+=g[i]})}function m(a){for(var b in a)a[b]=-a[b]}function n(a){a.forEach(function(a){a.reverse()})}function o(b,c){switch(a.rankDir){case"LR":return b.node(c).height;default:return b.node(c).width}}function p(b,c){switch(a.rankDir){case"LR":return b.node(c).width;default:return b.node(c).height}}function q(b,c){if(a.universalSep!==null)return a.universalSep;var d=o(b,c),e=b.node(c).dummy?a.edgeSep:a.nodeSep;return(d+e)/2}function r(b,c,d){switch(a.rankDir){case"LR":if(arguments.length<3)return b.node(c).y;b.node(c).y=d;break;default:if(arguments.length<3)return b.node(c).x;b.node(c).x=d}}function s(b,c,d,e){switch(a.rankDir){case"LR":if(arguments.length<3)return c.node(d)[b];c.node(d)[b]=e;break;default:if(arguments.length<3)return c.node(d)[b];c.node(d)[b]=e}}function t(b,c,d){switch(a.rankDir){case"LR":if(arguments.length<3)return b.node(c).x;b.node(c).x=d;break;default:if(arguments.length<3)return b.node(c).y;b.node(c).y=d}}function u(a,b,c,d){c.forEach(function(c,e){var f,g;c.forEach(function(c){var h=d[c];if(f){var i=q(b,f)+q(b,c);h-g<i&&console.log("Position phase: sep violation. Align: "+a+". Layer: "+e+". "+"U: "+f+" V: "+c+". Actual sep: "+(h-g)+" Expected sep: "+i)}f=c;g=h})})}var a={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30,rankDir:"TB",debugLevel:0},b=d.createTimer(),c={};c.nodeSep=d.propertyAccessor(c,a,"nodeSep");c.edgeSep=d.propertyAccessor(c,a,"edgeSep");c.universalSep=d.propertyAccessor(c,a,"universalSep");c.rankSep=d.propertyAccessor(c,a,"rankSep");c.rankDir=d.propertyAccessor(c,a,"rankDir");c.debugLevel=d.propertyAccessor(c,a,"debugLevel",function(a){b.enabled(a)});c.run=b.wrap("Position Phase",e);return c}},{"../util":10}],9:[function(a,b,c){function g(a){var b={},c=new PriorityQueue;a.eachNode(function(d){c.add(d,a.inEdges(d).length);b[d]=0});while(c.size()>0){var d=c.min();if(c.priority(d)>0)throw new Error("Input graph is not acyclic: "+a.toString());c.removeMin();var e=b[d];a.node(d).rank=e;a.outEdges(d).forEach(function(d){var f=a.target(d);b[f]=Math.max(b[f],e+(a.edge(d).minLen||1));c.decrease(f,c.priority(f)-1)})}}function h(a){function e(b){return Math.abs(a.node(b.u).rank-a.node(b.v).rank)-b.len}function f(){var a,d=Number.POSITIVE_INFINITY;c.forEach(function(c){if(b.has(c.u)!==b.has(c.v)){var f=e(c);if(f<d){b.has(c.u)?a={treeNode:c.v,graphNode:c.u,len:-c.len}:a={treeNode:c.u,graphNode:c.v,len:c.len};d=f}}});return a}var b=new Set(a.nodes()),c=[],d={};a.eachEdge(function(a,b,e,f){var g=j(b,e);g in d||c.push(d[g]={u:b,v:e,len:1});d[g].len=Math.max(d[g].len,f.minLen||1)});b.remove(a.nodes()[0]);while(b.size()>0){var g=f();b.remove(g.graphNode);a.node(g.graphNode).rank=a.node(g.treeNode).rank+g.len}}function i(a){var b=d.min(a.nodes().map(function(b){return a.node(b).rank}));a.eachNode(function(a,c){c.rank-=b})}function j(a,b){return a<b?a.length+":"+a+"-"+b:b.length+":"+b+"-"+a}var d=a("../util"),e=a("graphlib").alg.components,f=a("graphlib").filter;PriorityQueue=a("graphlib").data.PriorityQueue,Set=a("graphlib").data.Set;b.exports=function(a,b){var c=d.createTimer(b>=1);c.wrap("Rank phase",function(){g(a);e(a).forEach(function(b){var c=a.filterNodes(f.nodesFromList(b));h(c);i(c)})})()}},{"../util":10,graphlib:12}],10:[function(a,b,c){c.min=function(a){return Math.min.apply(null,a)};c.max=function(a){return Math.max.apply(null,a)};c.all=function(a,b){for(var c=0;c<a.length;++c)if(!b(a[c]))return!1;return!0};c.sum=function(a){return a.reduce(function(a,b){return a+b},0)};c.values=function(a){return Object.keys(a).map(function(b){return a[b]})};c.createTimer=function(a){var b={};a=a||!1;b.enabled=function(c){if(!arguments.length)return a;a=c;return b};b.wrap=function(b,c){return function(){var d=a?(new Date).getTime():null;try{return c.apply(null,arguments)}finally{d&&console.log(b+" time: "+((new Date).getTime()-d)+"ms")}}};return b};c.propertyAccessor=function(a,b,c,d){return function(e){if(!arguments.length)return b[c];b[c]=e;d&&d(e);return a}}},{}],11:[function(a,b,c){b.exports="0.3.0"},{}],12:[function(a,b,c){c.Graph=a("./lib/Graph");c.Digraph=a("./lib/Digraph");c.CGraph=a("./lib/CGraph");c.CDigraph=a("./lib/CDigraph");a("./lib/graph-converters");c.alg={isAcyclic:a("./lib/alg/isAcyclic"),components:a("./lib/alg/components"),dijkstra:a("./lib/alg/dijkstra"),dijkstraAll:a("./lib/alg/dijkstraAll"),findCycles:a("./lib/alg/findCycles"),floydWarshall:a("./lib/alg/floydWarshall"),prim:a("./lib/alg/prim"),tarjan:a("./lib/alg/tarjan"),topsort:a("./lib/alg/topsort")};c.converter={json:a("./lib/converter/json.js")};c.data={PriorityQueue:a("./lib/data/PriorityQueue"),Set:a("./lib/data/Set")};var d=a("./lib/filter");c.filter={all:d.all,nodesFromList:d.nodesFromList};c.version=a("./lib/version")},{"./lib/CDigraph":14,"./lib/CGraph":15,"./lib/Digraph":16,"./lib/Graph":17,"./lib/alg/components":18,"./lib/alg/dijkstra":19,"./lib/alg/dijkstraAll":20,"./lib/alg/findCycles":21,"./lib/alg/floydWarshall":22,"./lib/alg/isAcyclic":23,"./lib/alg/prim":24,"./lib/alg/tarjan":25,"./lib/alg/topsort":26,"./lib/converter/json.js":28,"./lib/data/PriorityQueue":29,"./lib/data/Set":30,"./lib/filter":31,"./lib/graph-converters":32,"./lib/version":34}],13:[function(a,b,c){function f(){this._value=undefined;this._nodes={};this._edges={};this._nextId=0}function g(a,b,c){(a[b]||(a[b]=new e)).add(c)}function h(a,b,c){var d=a[b];d.remove(c);d.size()===0&&delete a[b]}var d=a("./filter"),e=a("./data/Set");b.exports=f;f.prototype.order=function(){return Object.keys(this._nodes).length};f.prototype.size=function(){return Object.keys(this._edges).length};f.prototype.graph=function(a){if(arguments.length===0)return this._value;this._value=a};f.prototype.hasNode=function(a){return a in this._nodes};f.prototype.node=function(a,b){var c=this._strictGetNode(a);if(arguments.length===1)return c.value;c.value=b};f.prototype.nodes=function(){var a=[];this.eachNode(function(b){a.push(b)});return a};f.prototype.eachNode=function(a){for(var b in this._nodes){var c=this._nodes[b];a(c.id,c.value)}};f.prototype.hasEdge=function(a){return a in this._edges};f.prototype.edge=function(a,b){var c=this._strictGetEdge(a);if(arguments.length===1)return c.value;c.value=b};f.prototype.edges=function(){var a=[];this.eachEdge(function(b){a.push(b)});return a};f.prototype.eachEdge=function(a){for(var b in this._edges){var c=this._edges[b];a(c.id,c.u,c.v,c.value)}};f.prototype.incidentNodes=function(a){var b=this._strictGetEdge(a);return[b.u,b.v]};f.prototype.addNode=function(a,b){if(a===undefined||a===null){do a="_"+ ++this._nextId;while(this.hasNode(a))}else if(this.hasNode(a))throw new Error("Graph already has node '"+a+"':\n"+this.toString());this._nodes[a]={id:a,value:b};return a};f.prototype.delNode=function(a){this._strictGetNode(a);this.incidentEdges(a).forEach(function(a){this.delEdge(a)},this);delete this._nodes[a]};f.prototype._addEdge=function(a,b,c,d,e,f){this._strictGetNode(b);this._strictGetNode(c);if(a===undefined||a===null){do a="_"+ ++this._nextId;while(this.hasEdge(a))}else if(this.hasEdge(a))throw new Error("Graph already has edge '"+a+"':\n"+this.toString());this._edges[a]={id:a,u:b,v:c,value:d};g(e[c],b,a);g(f[b],c,a);return a};f.prototype._delEdge=function(a,b,c){var d=this._strictGetEdge(a);h(b[d.v],d.u,a);h(c[d.u],d.v,a);delete this._edges[a]};f.prototype.copy=function(){var a=new this.constructor;a.graph(this.graph);this.eachNode(function(b,c){a.addNode(b,c)});this.eachEdge(function(b,c,d,e){a.addEdge(b,c,d,e)});return a};f.prototype.filterNodes=function(a){var b=this.copy();this.nodes().forEach(function(c){a(c)||b.delNode(c)});return b};f.prototype._strictGetNode=function(a){var b=this._nodes[a];if(b===undefined)throw new Error("Node '"+a+"' is not in graph:\n"+this.toString());return b};f.prototype._strictGetEdge=function(a){var b=this._edges[a];if(b===undefined)throw new Error("Edge '"+a+"' is not in graph:\n"+this.toString());return b}},{"./data/Set":30,"./filter":31}],14:[function(a,b,c){var d=a("./Digraph"),e=a("./compoundify"),f=e(d);b.exports=f;f.fromDigraph=function(a){var b=new f,c=a.graph();c!==undefined&&b.graph(c);a.eachNode(function(a,c){c===undefined?b.addNode(a):b.addNode(a,c)});a.eachEdge(function(a,c,d,e){e===undefined?b.addEdge(null,c,d):b.addEdge(null,c,d,e)});return b};f.prototype.toString=function(){return"CDigraph "+JSON.stringify(this,null,2)}},{"./Digraph":16,"./compoundify":27}],15:[function(a,b,c){var d=a("./Graph"),e=a("./compoundify"),f=e(d);b.exports=f;f.fromGraph=function(a){var b=new f,c=a.graph();c!==undefined&&b.graph(c);a.eachNode(function(a,c){c===undefined?b.addNode(a):b.addNode(a,c)});a.eachEdge(function(a,c,d,e){e===undefined?b.addEdge(null,c,d):b.addEdge(null,c,d,e)});return b};f.prototype.toString=function(){return"CGraph "+JSON.stringify(this,null,2)}},{"./Graph":17,"./compoundify":27}],16:[function(a,b,c){function g(){e.call(this);this._inEdges={};this._outEdges={}}var d=a("./util"),e=a("./BaseGraph"),f=a("./data/Set");b.exports=g;g.prototype=new e;g.prototype.constructor=g;g.prototype.isDirected=function(){return!0};g.prototype.successors=function(a){this._strictGetNode(a);return Object.keys(this._outEdges[a]).map(function(a){return this._nodes[a].id},this)};g.prototype.predecessors=function(a){this._strictGetNode(a);return Object.keys(this._inEdges[a]).map(function(a){return this._nodes[a].id},this)};g.prototype.neighbors=function(a){return f.unionAll([this.successors(a),this.predecessors(a)]).keys()};g.prototype.sources=function(){var a=this;return this._filterNodes(function(b){return a.inEdges(b).length===0})};g.prototype.sinks=function(){var a=this;return this._filterNodes(function(b){return a.outEdges(b).length===0})};g.prototype.source=function(a){return this._strictGetEdge(a).u};g.prototype.target=function(a){return this._strictGetEdge(a).v};g.prototype.inEdges=function(a,b){this._strictGetNode(a);var c=f.unionAll(d.values(this._inEdges[a])).keys();if(arguments.length>1){this._strictGetNode(b);c=c.filter(function(a){return this.source(a)===b},this)}return c};g.prototype.outEdges=function(a,b){this._strictGetNode(a);var c=f.unionAll(d.values(this._outEdges[a])).keys();if(arguments.length>1){this._strictGetNode(b);c=c.filter(function(a){return this.target(a)===b},this)}return c};g.prototype.incidentEdges=function(a,b){return arguments.length>1?f.unionAll([this.outEdges(a,b),this.outEdges(b,a)]).keys():f.unionAll([this.inEdges(a),this.outEdges(a)]).keys()};g.prototype.toString=function(){return"Digraph "+JSON.stringify(this,null,2)};g.prototype.addNode=function(a,b){a=e.prototype.addNode.call(this,a,b);this._inEdges[a]={};this._outEdges[a]={};return a};g.prototype.delNode=function(a){e.prototype.delNode.call(this,a);delete this._inEdges[a];delete this._outEdges[a]};g.prototype.addEdge=function(a,b,c,d){return e.prototype._addEdge.call(this,a,b,c,d,this._inEdges,this._outEdges)};g.prototype.delEdge=function(a){e.prototype._delEdge.call(this,a,this._inEdges,this._outEdges)};g.prototype._filterNodes=function(a){var b=[];this.eachNode(function(c){a(c)&&b.push(c)});return b}},{"./BaseGraph":13,"./data/Set":30,"./util":33}],17:[function(a,b,c){function g(){e.call(this);this._incidentEdges={}}var d=a("./util"),e=a("./BaseGraph"),f=a("./data/Set");b.exports=g;g.prototype=new e;g.prototype.constructor=g;g.prototype.isDirected=function(){return!1};g.prototype.neighbors=function(a){this._strictGetNode(a);return Object.keys(this._incidentEdges[a]).map(function(a){return this._nodes[a].id},this)};g.prototype.incidentEdges=function(a,b){this._strictGetNode(a);if(arguments.length>1){this._strictGetNode(b);return b in this._incidentEdges[a]?this._incidentEdges[a][b].keys():[]}return f.unionAll(d.values(this._incidentEdges[a])).keys()};g.prototype.toString=function(){return"Graph "+JSON.stringify(this,null,2)};g.prototype.addNode=function(a,b){a=e.prototype.addNode.call(this,a,b);this._incidentEdges[a]={};return a};g.prototype.delNode=function(a){e.prototype.delNode.call(this,a);delete this._incidentEdges[a]};g.prototype.addEdge=function(a,b,c,d){return e.prototype._addEdge.call(this,a,b,c,d,this._incidentEdges,this._incidentEdges)};g.prototype.delEdge=function(a){e.prototype._delEdge.call(this,a,this._incidentEdges,this._incidentEdges)}},{"./BaseGraph":13,"./data/Set":30,"./util":33}],18:[function(a,b,c){function e(a){function e(b,d){if(!c.has(b)){c.add(b);d.push(b);a.neighbors(b).forEach(function(a){e(a,d)})}}var b=[],c=new d;a.nodes().forEach(function(a){var c=[];e(a,c);c.length>0&&b.push(c)});return b}var d=a("../data/Set");b.exports=e},{"../data/Set":30}],19:[function(a,b,c){function f(a,b,c,e){var f={},g=new d;c=c||function(){return 1};e=e||(a.isDirected()?function(b){return a.outEdges(b)}:function(b){return a.incidentEdges(b)});a.nodes().forEach(function(a){var c=a===b?0:Number.POSITIVE_INFINITY;f[a]={distance:c};g.add(a,c)});var h,i;while(g.size()>0){h=g.removeMin();i=f[h];if(i.distance===Number.POSITIVE_INFINITY)break;e(h).forEach(function(b){var d=a.incidentNodes(b),e=d[0]!==h?d[0]:d[1],j=f[e],k=c(b),l=i.distance+k;if(k<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+b+" Weight: "+k);if(l<j.distance){j.distance=l;j.predecessor=h;g.decrease(e,l)}})}return f}var d=a("../data/PriorityQueue"),e=a("../Digraph");b.exports=f},{"../Digraph":16,"../data/PriorityQueue":29}],20:[function(a,b,c){function e(a,b,c){var e={};a.nodes().forEach(function(f){e[f]=d(a,f,b,c)});return e}var d=a("./dijkstra");b.exports=e},{"./dijkstra":19}],21:[function(a,b,c){function e(a){return d(a).filter(function(a){return a.length>1})}var d=a("./tarjan");b.exports=e},{"./tarjan":25}],22:[function(a,b,c){function e(a,b,c){var d={},e=a.nodes();b=b||function(){return 1};c=c||(a.isDirected()?function(b){return a.outEdges(b)}:function(b){return a.incidentEdges(b)});e.forEach(function(f){d[f]={};d[f][f]={distance:0};e.forEach(function(a){f!==a&&(d[f][a]={distance:Number.POSITIVE_INFINITY})});c(f).forEach(function(c){var e=a.incidentNodes(c),h=e[0]!==f?e[0]:e[1],i=b(c);i<d[f][h].distance&&(d[f][h]={distance:i,predecessor:f})})});e.forEach(function(a){var b=d[a];e.forEach(function(c){var f=d[c];e.forEach(function(c){var d=f[a],e=b[c],g=f[c],h=d.distance+e.distance;if(h<g.distance){g.distance=h;g.predecessor=e.predecessor}})})});return d}var d=a("../Digraph");b.exports=e},{"../Digraph":16}],23:[function(a,b,c){function e(a){try{d(a)}catch(b){if(b instanceof d.CycleException)return!1;throw b}return!0}var d=a("./topsort");b.exports=e},{"./topsort":26}],24:[function(a,b,c){function f(a,b){var c=new d,f={},g=new e;if(a.order()===0)return c;a.eachNode(function(a){g.add(a,Number.POSITIVE_INFINITY);c.addNode(a)});g.decrease(a.nodes()[0],0);var h=!1;while(g.size()>0){var i=g.removeMin();if(i in f)c.addEdge(null,i,f[i]);else{if(h)throw new Error("Input graph is not connected: "+a);h=!0}a.incidentEdges(i).forEach(function(c){var d=a.incidentNodes(c),e=d[0]!==i?d[0]:d[1],h=g.priority(e);if(h!==undefined){var j=b(c);if(j<h){f[e]=i;g.decrease(e,j)}}})}return c}var d=a("../Graph"),e=a("../data/PriorityQueue");b.exports=f},{"../Graph":17,"../data/PriorityQueue":29}],25:[function(a,b,c){function e(a){function f(h){var i=d[h]={onStack:!0,lowlink:b,index:b++};c.push(h);a.successors(h).forEach(function(a){if(a in d)d[a].onStack&&(i.lowlink=Math.min(i.lowlink,d[a].index));else{f(a);i.lowlink=Math.min(i.lowlink,d[a].lowlink)}});if(i.lowlink===i.index){var j=[],k;do{k=c.pop();d[k].onStack=!1;j.push(k)}while(h!==k);e.push(j)}}if(!a.isDirected())throw new Error("tarjan can only be applied to a directed graph. Bad input: "+a);var b=0,c=[],d={},e=[];a.nodes().forEach(function(a){a in d||f(a)});return e}var d=a("../Digraph");b.exports=e},{"../Digraph":16}],26:[function(a,b,c){function e(a){function e(g){if(g in c)throw new f;if(!(g in b)){c[g]=!0;b[g]=!0;a.predecessors(g).forEach(function(a){e(a)});delete c[g];d.push(g)}}if(!a.isDirected())throw new Error("topsort can only be applied to a directed graph. Bad input: "+a);var b={},c={},d=[],g=a.sinks();if(a.order()!==0&&g.length===0)throw new f;a.sinks().forEach(function(a){e(a)});return d}function f(){}var d=a("../Digraph");b.exports=e;e.CycleException=f;f.prototype.toString=function(){return"Graph has at least one cycle"}},{"../Digraph":16}],27:[function(a,b,c){function e(a){function b(){a.call(this);this._parents={};this._children={"null":new d}}b.prototype=new a;b.prototype.constructor=b;b.prototype.parent=function(a,b){this._strictGetNode(a);if(arguments.length<2)return this._parents[a];if(a===b)throw new Error("Cannot make "+a+" a parent of itself");b!==null&&this._strictGetNode(b);this._children[this._parents[a]].remove(a);this._parents[a]=b;this._children[b].add(a)};b.prototype.children=function(a){a!==null&&this._strictGetNode(a);return this._children[a].keys()};b.prototype.addNode=function(b,c){b=a.prototype.addNode.call(this,b,c);this._parents[b]=null;this._children[b]=new d;this._children[null].add(b);return b};b.prototype.delNode=function(b){var c=this.parent(b);this._children[b].keys().forEach(function(a){this.parent(a,c)},this);this._children[c].remove(b);delete this._parents[b];delete this._children[b];return a.prototype.delNode.call(this,b)};b.prototype.copy=function(){var b=a.prototype.copy.call(this);this.nodes().forEach(function(a){b.parent(a,this.parent(a))},this);return b};return b}var d=a("./data/Set");b.exports=e},{"./data/Set":30}],28:[function(a,b,c){function h(a){return Object.prototype.toString.call(a).slice(8,-1)}var d=a("../Graph"),e=a("../Digraph"),f=a("../CGraph"),g=a("../CDigraph");c.decode=function(a,b,c){c=c||e;if(h(a)!=="Array")throw new Error("nodes is not an Array");if(h(b)!=="Array")throw new Error("edges is not an Array");if(typeof c=="string")switch(c){case"graph":c=d;break;case"digraph":c=e;break;case"cgraph":c=f;break;case"cdigraph":c=g;break;default:throw new Error("Unrecognized graph type: "+c)}var i=new c;a.forEach(function(a){i.addNode(a.id,a.value)});i.parent&&a.forEach(function(a){a.children&&a.children.forEach(function(b){i.parent(b,a.id)})});b.forEach(function(a){i.addEdge(a.id,a.u,a.v,a.value)});return i};c.encode=function(a){var b=[],c=[];a.eachNode(function(c,d){var e={id:c,value:d};if(a.children){var f=a.children(c);f.length&&(e.children=f)}b.push(e)});a.eachEdge(function(a,b,d,e){c.push({id:a,u:b,v:d,value:e})});var h;if(a instanceof g)h="cdigraph";else if(a instanceof f)h="cgraph";else if(a instanceof e)h="digraph";else if(a instanceof d)h="graph";else throw new Error("Couldn't determine type of graph: "+a);return{nodes:b,edges:c,type:h}}},{"../CDigraph":14,"../CGraph":15,"../Digraph":16,"../Graph":17}],29:[function(a,b,c){function d(){this._arr=[];this._keyIndices={}}b.exports=d;d.prototype.size=function(){return this._arr.length};d.prototype.keys=function(){return this._arr.map(function(a){return a.key})};d.prototype.has=function(a){return a in this._keyIndices};d.prototype.priority=function(a){var b=this._keyIndices[a];if(b!==undefined)return this._arr[b].priority};d.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};d.prototype.add=function(a,b){if(a in this._keyIndices)return!1;var c={key:a,priority:b},d=this._arr.length;this._keyIndices[a]=d;this._arr.push(c);this._decrease(d);return!0};d.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var a=this._arr.pop();delete this._keyIndices[a.key];this._heapify(0);return a.key};d.prototype.decrease=function(a,b){var c=this._keyIndices[a];if(b>this._arr[c].priority)throw new Error("New priority is greater than current priority. Key: "+
a+" Old: "+this._arr[c].priority+" New: "+b);this._arr[c].priority=b;this._decrease(c)};d.prototype._heapify=function(a){var b=this._arr,c=2*a,d=c+1,e=a;if(c<b.length){e=b[c].priority<b[e].priority?c:e;d<b.length&&(e=b[d].priority<b[e].priority?d:e);if(e!==a){this._swap(a,e);this._heapify(e)}}};d.prototype._decrease=function(a){var b=this._arr,c=b[a].priority,d;while(a>0){d=a>>1;if(b[d].priority<c)break;this._swap(a,d);a=d}};d.prototype._swap=function(a,b){var c=this._arr,d=this._keyIndices,e=c[a];c[a]=c[b];c[b]=e;d[c[a].key]=a;d[c[b].key]=b}},{}],30:[function(a,b,c){function e(a){this._size=0;this._keys={};a&&a.forEach(function(a){this.add(a)},this)}var d=a("../util");b.exports=e;e.intersectAll=function(a){if(a.length===0)return new e;var b=new e(a[0].keys());a.forEach(function(a){b=b.intersect(a)});return b};e.unionAll=function(a){var b=new e;a.forEach(function(a){b=b.union(a)});return b};e.prototype.size=function(){return this._size};e.prototype.keys=function(){return d.values(this._keys)};e.prototype.has=function(a){return a in this._keys};e.prototype.add=function(a){if(a in this._keys)return!1;this._keys[a]=a;++this._size;return!0};e.prototype.remove=function(a){if(a in this._keys){delete this._keys[a];--this._size;return!0}return!1};e.prototype.intersect=function(a){a.keys||(a=new e(a));var b=new e;this.keys().forEach(function(c){a.has(c)&&b.add(c)});return b};e.prototype.union=function(a){a instanceof e||(a=new e(a));var b=new e(this.keys());a.keys().forEach(function(a){b.add(a)});return b}},{"../util":33}],31:[function(a,b,c){var d=a("./data/Set");c.all=function(){return function(){return!0}};c.nodesFromList=function(a){var b=new d(a);return function(a){return b.has(a)}}},{"./data/Set":30}],32:[function(a,b,c){var d=a("./Graph"),e=a("./Digraph");d.prototype.toDigraph=d.prototype.asDirected=function(){var a=new e;this.eachNode(function(b,c){a.addNode(b,c)});this.eachEdge(function(b,c,d,e){a.addEdge(null,c,d,e);a.addEdge(null,d,c,e)});return a};e.prototype.toGraph=e.prototype.asUndirected=function(){var a=new d;this.eachNode(function(b,c){a.addNode(b,c)});this.eachEdge(function(b,c,d,e){a.addEdge(b,c,d,e)});return a}},{"./Digraph":16,"./Graph":17}],33:[function(a,b,c){c.values=function(a){return Object.keys(a).map(function(b){return a[b]})}},{}],34:[function(a,b,c){b.exports="0.5.7"},{}]},{},[1]);